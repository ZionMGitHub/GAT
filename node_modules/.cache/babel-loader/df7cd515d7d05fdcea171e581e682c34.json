{"ast":null,"code":"import _slicedToArray from \"/Users/coderschool/dev/Zion/newrepo/gat-dev/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useRef, useState, useImperativeHandle, useCallback, useEffect } from 'react';\nimport { PageFlip } from 'page-flip';\nvar HTMLFlipBookForward = React.forwardRef(function (props, ref) {\n  var htmlElementRef = useRef(null);\n  var childRef = useRef([]);\n\n  var _pageFlip = useRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      pages = _useState2[0],\n      setPages = _useState2[1];\n\n  useImperativeHandle(ref, function () {\n    return {\n      pageFlip: function pageFlip() {\n        return _pageFlip.current;\n      }\n    };\n  });\n  var refreshOnPageDelete = useCallback(function () {\n    if (_pageFlip.current) {\n      _pageFlip.current.clear();\n    }\n  }, []);\n  var removeHandlers = useCallback(function () {\n    var flip = _pageFlip.current;\n\n    if (flip) {\n      flip.off('flip');\n      flip.off('changeOrientation');\n      flip.off('changeState');\n      flip.off('init');\n      flip.off('update');\n    }\n  }, []);\n  useEffect(function () {\n    childRef.current = [];\n\n    if (props.children) {\n      var childList = React.Children.map(props.children, function (child) {\n        return React.cloneElement(child, {\n          ref: function ref(dom) {\n            if (dom) {\n              childRef.current.push(dom);\n            }\n          }\n        });\n      });\n\n      if (!props.renderOnlyPageLengthChange || pages.length !== childList.length) {\n        if (childList.length < pages.length) {\n          refreshOnPageDelete();\n        }\n\n        setPages(childList);\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [props.children]);\n  useEffect(function () {\n    var setHandlers = function setHandlers() {\n      var flip = _pageFlip.current;\n\n      if (flip) {\n        if (props.onFlip) {\n          flip.on('flip', function (e) {\n            return props.onFlip(e);\n          });\n        }\n\n        if (props.onChangeOrientation) {\n          flip.on('changeOrientation', function (e) {\n            return props.onChangeOrientation(e);\n          });\n        }\n\n        if (props.onChangeState) {\n          flip.on('changeState', function (e) {\n            return props.onChangeState(e);\n          });\n        }\n\n        if (props.onInit) {\n          flip.on('init', function (e) {\n            return props.onInit(e);\n          });\n        }\n\n        if (props.onUpdate) {\n          flip.on('update', function (e) {\n            return props.onUpdate(e);\n          });\n        }\n      }\n    };\n\n    if (pages.length > 0 && childRef.current.length > 0) {\n      removeHandlers();\n\n      if (htmlElementRef.current && !_pageFlip.current) {\n        _pageFlip.current = new PageFlip(htmlElementRef.current, props);\n      }\n\n      if (!_pageFlip.current.getFlipController()) {\n        _pageFlip.current.loadFromHTML(childRef.current);\n      } else {\n        _pageFlip.current.updateFromHtml(childRef.current);\n      }\n\n      setHandlers();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [pages]);\n  return React.createElement(\"div\", {\n    ref: htmlElementRef,\n    className: props.className,\n    style: props.style\n  }, pages);\n});\nvar HTMLFlipBook = React.memo(HTMLFlipBookForward);\nexport default HTMLFlipBook;","map":{"version":3,"mappings":"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","names":["HTMLFlipBookForward","React","forwardRef","props","ref","htmlElementRef","useRef","childRef","pageFlip","useState","pages","setPages","useImperativeHandle","current","refreshOnPageDelete","useCallback","clear","removeHandlers","flip","off","useEffect","children","childList","Children","map","child","cloneElement","dom","push","renderOnlyPageLengthChange","length","setHandlers","onFlip","on","e","onChangeOrientation","onChangeState","onInit","onUpdate","PageFlip","getFlipController","loadFromHTML","updateFromHtml","className","style","HTMLFlipBook","memo"],"sources":["../src/html-flip-book/index.tsx"],"sourcesContent":["import React, {\n    ReactElement,\n    useCallback,\n    useEffect,\n    useImperativeHandle,\n    useRef,\n    useState,\n} from 'react';\n\nimport { PageFlip } from 'page-flip';\nimport { IFlipSetting, IEventProps } from './settings';\n\ninterface IProps extends IFlipSetting, IEventProps {\n    className: string;\n    style: React.CSSProperties;\n    children: React.ReactNode;\n    renderOnlyPageLengthChange?: boolean;\n}\n\nconst HTMLFlipBookForward = React.forwardRef(\n    (props: IProps, ref: React.MutableRefObject<PageFlip>) => {\n        const htmlElementRef = useRef<HTMLDivElement>(null);\n        const childRef = useRef<HTMLElement[]>([]);\n        const pageFlip = useRef<PageFlip>();\n\n        const [pages, setPages] = useState<ReactElement[]>([]);\n\n        useImperativeHandle(ref, () => ({\n            pageFlip: () => pageFlip.current,\n        }));\n\n        const refreshOnPageDelete = useCallback(() => {\n            if (pageFlip.current) {\n                pageFlip.current.clear();\n            }\n        }, []);\n\n        const removeHandlers = useCallback(() => {\n            const flip = pageFlip.current;\n\n            if (flip) {\n                flip.off('flip');\n                flip.off('changeOrientation');\n                flip.off('changeState');\n                flip.off('init');\n                flip.off('update');\n            }\n        }, []);\n\n        useEffect(() => {\n            childRef.current = [];\n\n            if (props.children) {\n                const childList = React.Children.map(props.children, (child) => {\n                    return React.cloneElement(child as ReactElement, {\n                        ref: (dom) => {\n                            if (dom) {\n                                childRef.current.push(dom);\n                            }\n                        },\n                    });\n                });\n\n                if (!props.renderOnlyPageLengthChange || pages.length !== childList.length) {\n                    if (childList.length < pages.length) {\n                        refreshOnPageDelete();\n                    }\n\n                    setPages(childList);\n                }\n            }\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, [props.children]);\n\n        useEffect(() => {\n            const setHandlers = () => {\n                const flip = pageFlip.current;\n\n                if (flip) {\n                    if (props.onFlip) {\n                        flip.on('flip', (e: unknown) => props.onFlip(e));\n                    }\n\n                    if (props.onChangeOrientation) {\n                        flip.on('changeOrientation', (e: unknown) => props.onChangeOrientation(e));\n                    }\n\n                    if (props.onChangeState) {\n                        flip.on('changeState', (e: unknown) => props.onChangeState(e));\n                    }\n\n                    if (props.onInit) {\n                        flip.on('init', (e: unknown) => props.onInit(e));\n                    }\n\n                    if (props.onUpdate) {\n                        flip.on('update', (e: unknown) => props.onUpdate(e));\n                    }\n                }\n            };\n\n            if (pages.length > 0 && childRef.current.length > 0) {\n                removeHandlers();\n\n                if (htmlElementRef.current && !pageFlip.current) {\n                    pageFlip.current = new PageFlip(htmlElementRef.current, props);\n                }\n\n                if (!pageFlip.current.getFlipController()) {\n                    pageFlip.current.loadFromHTML(childRef.current);\n                } else {\n                    pageFlip.current.updateFromHtml(childRef.current);\n                }\n\n                setHandlers();\n            }\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, [pages]);\n\n        return (\n            <div ref={htmlElementRef} className={props.className} style={props.style}>\n                {pages}\n            </div>\n        );\n    }\n);\n\nexport const HTMLFlipBook = React.memo(HTMLFlipBookForward);\n"]},"metadata":{},"sourceType":"module"}