{"ast":null,"code":"var _get = require(\"/Users/coderschool/dev/Zion/newrepo/gat-dev/node_modules/@babel/runtime/helpers/get.js\").default;\n\nvar _getPrototypeOf = require(\"/Users/coderschool/dev/Zion/newrepo/gat-dev/node_modules/@babel/runtime/helpers/getPrototypeOf.js\").default;\n\nvar _createForOfIteratorHelper = require(\"/Users/coderschool/dev/Zion/newrepo/gat-dev/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\n\nvar _inherits = require(\"/Users/coderschool/dev/Zion/newrepo/gat-dev/node_modules/@babel/runtime/helpers/inherits.js\").default;\n\nvar _createSuper = require(\"/Users/coderschool/dev/Zion/newrepo/gat-dev/node_modules/@babel/runtime/helpers/createSuper.js\").default;\n\nvar _classCallCheck = require(\"/Users/coderschool/dev/Zion/newrepo/gat-dev/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/Users/coderschool/dev/Zion/newrepo/gat-dev/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\n!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? e(exports) : \"function\" == typeof define && define.amd ? define([\"exports\"], e) : e((t = t || self).St = {});\n}(this, function (t) {\n  \"use strict\";\n\n  var e = /*#__PURE__*/function () {\n    function e(t, _e) {\n      _classCallCheck(this, e);\n\n      this.state = {\n        angle: 0,\n        area: [],\n        position: {\n          x: 0,\n          y: 0\n        },\n        hardAngle: 0,\n        hardDrawingAngle: 0\n      }, this.createdDensity = _e, this.nowDrawingDensity = this.createdDensity, this.render = t;\n    }\n\n    _createClass(e, [{\n      key: \"setDensity\",\n      value: function setDensity(t) {\n        this.createdDensity = t, this.nowDrawingDensity = t;\n      }\n    }, {\n      key: \"setDrawingDensity\",\n      value: function setDrawingDensity(t) {\n        this.nowDrawingDensity = t;\n      }\n    }, {\n      key: \"setPosition\",\n      value: function setPosition(t) {\n        this.state.position = t;\n      }\n    }, {\n      key: \"setAngle\",\n      value: function setAngle(t) {\n        this.state.angle = t;\n      }\n    }, {\n      key: \"setArea\",\n      value: function setArea(t) {\n        this.state.area = t;\n      }\n    }, {\n      key: \"setHardDrawingAngle\",\n      value: function setHardDrawingAngle(t) {\n        this.state.hardDrawingAngle = t;\n      }\n    }, {\n      key: \"setHardAngle\",\n      value: function setHardAngle(t) {\n        this.state.hardAngle = t, this.state.hardDrawingAngle = t;\n      }\n    }, {\n      key: \"setOrientation\",\n      value: function setOrientation(t) {\n        this.orientation = t;\n      }\n    }, {\n      key: \"getDrawingDensity\",\n      value: function getDrawingDensity() {\n        return this.nowDrawingDensity;\n      }\n    }, {\n      key: \"getDensity\",\n      value: function getDensity() {\n        return this.createdDensity;\n      }\n    }, {\n      key: \"getHardAngle\",\n      value: function getHardAngle() {\n        return this.state.hardAngle;\n      }\n    }]);\n\n    return e;\n  }();\n\n  var i = /*#__PURE__*/function (_e2) {\n    _inherits(i, _e2);\n\n    var _super = _createSuper(i);\n\n    function i(t, e, _i) {\n      var _this;\n\n      _classCallCheck(this, i);\n\n      _this = _super.call(this, t, _i), _this.image = null, _this.isLoad = !1, _this.loadingAngle = 0, _this.image = new Image(), _this.image.src = e;\n      return _this;\n    }\n\n    _createClass(i, [{\n      key: \"draw\",\n      value: function draw(t) {\n        var e = this.render.getContext(),\n            _i2 = this.render.convertToGlobal(this.state.position),\n            s = this.render.getRect().pageWidth,\n            n = this.render.getRect().height;\n\n        e.save(), e.translate(_i2.x, _i2.y), e.beginPath();\n\n        var _iterator = _createForOfIteratorHelper(this.state.area),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _t = _step.value;\n            null !== _t && (_t = this.render.convertToGlobal(_t), e.lineTo(_t.x - _i2.x, _t.y - _i2.y));\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        e.rotate(this.state.angle), e.clip(), this.isLoad ? e.drawImage(this.image, 0, 0, s, n) : this.drawLoader(e, {\n          x: 0,\n          y: 0\n        }, s, n), e.restore();\n      }\n    }, {\n      key: \"simpleDraw\",\n      value: function simpleDraw(t) {\n        var e = this.render.getRect(),\n            _i3 = this.render.getContext(),\n            s = e.pageWidth,\n            n = e.height,\n            h = 1 === t ? e.left + e.pageWidth : e.left,\n            r = e.top;\n\n        this.isLoad ? _i3.drawImage(this.image, h, r, s, n) : this.drawLoader(_i3, {\n          x: h,\n          y: r\n        }, s, n);\n      }\n    }, {\n      key: \"drawLoader\",\n      value: function drawLoader(t, e, _i4, s) {\n        t.beginPath(), t.strokeStyle = \"rgb(200, 200, 200)\", t.fillStyle = \"rgb(255, 255, 255)\", t.lineWidth = 1, t.rect(e.x + 1, e.y + 1, _i4 - 1, s - 1), t.stroke(), t.fill();\n        var n = {\n          x: e.x + _i4 / 2,\n          y: e.y + s / 2\n        };\n        t.beginPath(), t.lineWidth = 10, t.arc(n.x, n.y, 20, this.loadingAngle, 3 * Math.PI / 2 + this.loadingAngle), t.stroke(), t.closePath(), this.loadingAngle += .07, this.loadingAngle >= 2 * Math.PI && (this.loadingAngle = 0);\n      }\n    }, {\n      key: \"load\",\n      value: function load() {\n        var _this2 = this;\n\n        this.isLoad || (this.image.onload = function () {\n          _this2.isLoad = !0;\n        });\n      }\n    }, {\n      key: \"newTemporaryCopy\",\n      value: function newTemporaryCopy() {\n        return this;\n      }\n    }, {\n      key: \"getTemporaryCopy\",\n      value: function getTemporaryCopy() {\n        return this;\n      }\n    }, {\n      key: \"hideTemporaryCopy\",\n      value: function hideTemporaryCopy() {}\n    }]);\n\n    return i;\n  }(e);\n\n  var s = /*#__PURE__*/function () {\n    function s(t, e) {\n      _classCallCheck(this, s);\n\n      this.pages = [], this.currentPageIndex = 0, this.currentSpreadIndex = 0, this.landscapeSpread = [], this.portraitSpread = [], this.render = e, this.app = t, this.currentPageIndex = 0, this.isShowCover = this.app.getSettings().showCover;\n    }\n\n    _createClass(s, [{\n      key: \"destroy\",\n      value: function destroy() {\n        this.pages = [];\n      }\n    }, {\n      key: \"createSpread\",\n      value: function createSpread() {\n        this.landscapeSpread = [], this.portraitSpread = [];\n\n        for (var _t2 = 0; _t2 < this.pages.length; _t2++) {\n          this.portraitSpread.push([_t2]);\n        }\n\n        var t = 0;\n        this.isShowCover && (this.pages[0].setDensity(\"hard\"), this.landscapeSpread.push([t]), t++);\n\n        for (var _e3 = t; _e3 < this.pages.length; _e3 += 2) {\n          _e3 < this.pages.length - 1 ? this.landscapeSpread.push([_e3, _e3 + 1]) : (this.landscapeSpread.push([_e3]), this.pages[_e3].setDensity(\"hard\"));\n        }\n      }\n    }, {\n      key: \"getSpread\",\n      value: function getSpread() {\n        return \"landscape\" === this.render.getOrientation() ? this.landscapeSpread : this.portraitSpread;\n      }\n    }, {\n      key: \"getSpreadIndexByPage\",\n      value: function getSpreadIndexByPage(t) {\n        var e = this.getSpread();\n\n        for (var _i5 = 0; _i5 < e.length; _i5++) {\n          if (t === e[_i5][0] || t === e[_i5][1]) return _i5;\n        }\n\n        return null;\n      }\n    }, {\n      key: \"getPageCount\",\n      value: function getPageCount() {\n        return this.pages.length;\n      }\n    }, {\n      key: \"getPages\",\n      value: function getPages() {\n        return this.pages;\n      }\n    }, {\n      key: \"getPage\",\n      value: function getPage(t) {\n        if (t >= 0 && t < this.pages.length) return this.pages[t];\n        throw new Error(\"Invalid page number\");\n      }\n    }, {\n      key: \"nextBy\",\n      value: function nextBy(t) {\n        var e = this.pages.indexOf(t);\n        return e < this.pages.length - 1 ? this.pages[e + 1] : null;\n      }\n    }, {\n      key: \"prevBy\",\n      value: function prevBy(t) {\n        var e = this.pages.indexOf(t);\n        return e > 0 ? this.pages[e - 1] : null;\n      }\n    }, {\n      key: \"getFlippingPage\",\n      value: function getFlippingPage(t) {\n        var e = this.currentSpreadIndex;\n        if (\"portrait\" === this.render.getOrientation()) return 0 === t ? this.pages[e].newTemporaryCopy() : this.pages[e - 1];\n        {\n          var _i6 = 0 === t ? this.getSpread()[e + 1] : this.getSpread()[e - 1];\n\n          return 1 === _i6.length || 0 === t ? this.pages[_i6[0]] : this.pages[_i6[1]];\n        }\n      }\n    }, {\n      key: \"getBottomPage\",\n      value: function getBottomPage(t) {\n        var e = this.currentSpreadIndex;\n        if (\"portrait\" === this.render.getOrientation()) return 0 === t ? this.pages[e + 1] : this.pages[e - 1];\n        {\n          var _i7 = 0 === t ? this.getSpread()[e + 1] : this.getSpread()[e - 1];\n\n          return 1 === _i7.length ? this.pages[_i7[0]] : 0 === t ? this.pages[_i7[1]] : this.pages[_i7[0]];\n        }\n      }\n    }, {\n      key: \"showNext\",\n      value: function showNext() {\n        this.currentSpreadIndex < this.getSpread().length && (this.currentSpreadIndex++, this.showSpread());\n      }\n    }, {\n      key: \"showPrev\",\n      value: function showPrev() {\n        this.currentSpreadIndex > 0 && (this.currentSpreadIndex--, this.showSpread());\n      }\n    }, {\n      key: \"getCurrentPageIndex\",\n      value: function getCurrentPageIndex() {\n        return this.currentPageIndex;\n      }\n    }, {\n      key: \"show\",\n      value: function show() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        if (null === t && (t = this.currentPageIndex), t < 0 || t >= this.pages.length) return;\n        var e = this.getSpreadIndexByPage(t);\n        null !== e && (this.currentSpreadIndex = e, this.showSpread());\n      }\n    }, {\n      key: \"getCurrentSpreadIndex\",\n      value: function getCurrentSpreadIndex() {\n        return this.currentSpreadIndex;\n      }\n    }, {\n      key: \"setCurrentSpreadIndex\",\n      value: function setCurrentSpreadIndex(t) {\n        if (!(t >= 0 && t < this.getSpread().length)) throw new Error(\"Invalid page\");\n        this.currentSpreadIndex = t;\n      }\n    }, {\n      key: \"showSpread\",\n      value: function showSpread() {\n        var t = this.getSpread()[this.currentSpreadIndex];\n        2 === t.length ? (this.render.setLeftPage(this.pages[t[0]]), this.render.setRightPage(this.pages[t[1]])) : \"landscape\" === this.render.getOrientation() && t[0] === this.pages.length - 1 ? (this.render.setLeftPage(this.pages[t[0]]), this.render.setRightPage(null)) : (this.render.setLeftPage(null), this.render.setRightPage(this.pages[t[0]])), this.currentPageIndex = t[0], this.app.updatePageIndex(this.currentPageIndex);\n      }\n    }]);\n\n    return s;\n  }();\n\n  var n = /*#__PURE__*/function (_s) {\n    _inherits(n, _s);\n\n    var _super2 = _createSuper(n);\n\n    function n(t, e, i) {\n      var _this3;\n\n      _classCallCheck(this, n);\n\n      _this3 = _super2.call(this, t, e), _this3.imagesHref = i;\n      return _this3;\n    }\n\n    _createClass(n, [{\n      key: \"load\",\n      value: function load() {\n        var _iterator2 = _createForOfIteratorHelper(this.imagesHref),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _t3 = _step2.value;\n\n            var _e4 = new i(this.render, _t3, \"soft\");\n\n            _e4.load(), this.pages.push(_e4);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        this.createSpread();\n      }\n    }]);\n\n    return n;\n  }(s);\n\n  var h = /*#__PURE__*/function () {\n    function h() {\n      _classCallCheck(this, h);\n    }\n\n    _createClass(h, null, [{\n      key: \"GetDistanceBetweenTwoPoint\",\n      value: function GetDistanceBetweenTwoPoint(t, e) {\n        return null === t || null === e ? 1 / 0 : Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2));\n      }\n    }, {\n      key: \"GetSegmentLength\",\n      value: function GetSegmentLength(t) {\n        return h.GetDistanceBetweenTwoPoint(t[0], t[1]);\n      }\n    }, {\n      key: \"GetAngleBetweenTwoLine\",\n      value: function GetAngleBetweenTwoLine(t, e) {\n        var i = t[0].y - t[1].y,\n            s = e[0].y - e[1].y,\n            n = t[1].x - t[0].x,\n            _h = e[1].x - e[0].x;\n\n        return Math.acos((i * s + n * _h) / (Math.sqrt(i * i + n * n) * Math.sqrt(s * s + _h * _h)));\n      }\n    }, {\n      key: \"PointInRect\",\n      value: function PointInRect(t, e) {\n        return null === e ? null : e.x >= t.left && e.x <= t.width + t.left && e.y >= t.top && e.y <= t.top + t.height ? e : null;\n      }\n    }, {\n      key: \"GetRotatedPoint\",\n      value: function GetRotatedPoint(t, e, i) {\n        return {\n          x: t.x * Math.cos(i) + t.y * Math.sin(i) + e.x,\n          y: t.y * Math.cos(i) - t.x * Math.sin(i) + e.y\n        };\n      }\n    }, {\n      key: \"LimitPointToCircle\",\n      value: function LimitPointToCircle(t, e, i) {\n        if (h.GetDistanceBetweenTwoPoint(t, i) <= e) return i;\n        var s = t.x,\n            n = t.y,\n            r = i.x,\n            o = i.y;\n        var a = Math.sqrt(Math.pow(e, 2) * Math.pow(s - r, 2) / (Math.pow(s - r, 2) + Math.pow(n - o, 2))) + s;\n        i.x < 0 && (a *= -1);\n        var g = (a - s) * (n - o) / (s - r) + n;\n        return s - r + n === 0 && (g = e), {\n          x: a,\n          y: g\n        };\n      }\n    }, {\n      key: \"GetIntersectBetweenTwoSegment\",\n      value: function GetIntersectBetweenTwoSegment(t, e, i) {\n        return h.PointInRect(t, h.GetIntersectBeetwenTwoLine(e, i));\n      }\n    }, {\n      key: \"GetIntersectBeetwenTwoLine\",\n      value: function GetIntersectBeetwenTwoLine(t, e) {\n        var i = t[0].y - t[1].y,\n            s = e[0].y - e[1].y,\n            n = t[1].x - t[0].x,\n            _h2 = e[1].x - e[0].x,\n            r = t[0].x * t[1].y - t[1].x * t[0].y,\n            o = e[0].x * e[1].y - e[1].x * e[0].y,\n            a = i * o - s * r,\n            g = n * o - _h2 * r,\n            l = -(r * _h2 - o * n) / (i * _h2 - s * n),\n            d = -(i * o - s * r) / (i * _h2 - s * n);\n\n        if (isFinite(l) && isFinite(d)) return {\n          x: l,\n          y: d\n        };\n        if (Math.abs(a - g) < .1) throw new Error(\"Segment included\");\n        return null;\n      }\n    }, {\n      key: \"GetCordsFromTwoPoint\",\n      value: function GetCordsFromTwoPoint(t, e) {\n        var i = Math.abs(t.x - e.x),\n            s = Math.abs(t.y - e.y),\n            n = Math.max(i, s),\n            _h3 = [t];\n\n        function r(t, e, i, s, n) {\n          return e > t ? t + n * (i / s) : e < t ? t - n * (i / s) : t;\n        }\n\n        for (var _o = 1; _o <= n; _o += 1) {\n          _h3.push({\n            x: r(t.x, e.x, i, n, _o),\n            y: r(t.y, e.y, s, n, _o)\n          });\n        }\n\n        return _h3;\n      }\n    }]);\n\n    return h;\n  }();\n\n  var r = /*#__PURE__*/function (_e5) {\n    _inherits(r, _e5);\n\n    var _super3 = _createSuper(r);\n\n    function r(t, e, i) {\n      var _this4;\n\n      _classCallCheck(this, r);\n\n      _this4 = _super3.call(this, t, i), _this4.copiedElement = null, _this4.temporaryCopy = null, _this4.isLoad = !1, _this4.element = e, _this4.element.classList.add(\"stf__item\"), _this4.element.classList.add(\"--\" + i);\n      return _this4;\n    }\n\n    _createClass(r, [{\n      key: \"newTemporaryCopy\",\n      value: function newTemporaryCopy() {\n        return \"hard\" === this.nowDrawingDensity ? this : (null === this.temporaryCopy && (this.copiedElement = this.element.cloneNode(!0), this.element.parentElement.appendChild(this.copiedElement), this.temporaryCopy = new r(this.render, this.copiedElement, this.nowDrawingDensity)), this.getTemporaryCopy());\n      }\n    }, {\n      key: \"getTemporaryCopy\",\n      value: function getTemporaryCopy() {\n        return this.temporaryCopy;\n      }\n    }, {\n      key: \"hideTemporaryCopy\",\n      value: function hideTemporaryCopy() {\n        null !== this.temporaryCopy && (this.copiedElement.remove(), this.copiedElement = null, this.temporaryCopy = null);\n      }\n    }, {\n      key: \"draw\",\n      value: function draw(t) {\n        var e = t || this.nowDrawingDensity,\n            i = this.render.convertToGlobal(this.state.position),\n            s = this.render.getRect().pageWidth,\n            n = this.render.getRect().height;\n        this.element.classList.remove(\"--simple\");\n        var h = \"\\n            display: block;\\n            z-index: \".concat(this.element.style.zIndex, \";\\n            left: 0;\\n            top: 0;\\n            width: \").concat(s, \"px;\\n            height: \").concat(n, \"px;\\n        \");\n        \"hard\" === e ? this.drawHard(h) : this.drawSoft(i, h);\n      }\n    }, {\n      key: \"drawHard\",\n      value: function drawHard() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n        var e = this.render.getRect().left + this.render.getRect().width / 2,\n            i = this.state.hardDrawingAngle,\n            s = t + \"\\n                backface-visibility: hidden;\\n                -webkit-backface-visibility: hidden;\\n                clip-path: none;\\n                -webkit-clip-path: none;\\n            \" + (0 === this.orientation ? \"transform-origin: \".concat(this.render.getRect().pageWidth, \"px 0; \\n                   transform: translate3d(0, 0, 0) rotateY(\").concat(i, \"deg);\") : \"transform-origin: 0 0; \\n                   transform: translate3d(\".concat(e, \"px, 0, 0) rotateY(\").concat(i, \"deg);\"));\n        this.element.style.cssText = s;\n      }\n    }, {\n      key: \"drawSoft\",\n      value: function drawSoft(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n        var i = \"polygon( \";\n\n        var _iterator3 = _createForOfIteratorHelper(this.state.area),\n            _step3;\n\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _t4 = _step3.value;\n\n            if (null !== _t4) {\n              var _e6 = 1 === this.render.getDirection() ? {\n                x: -_t4.x + this.state.position.x,\n                y: _t4.y - this.state.position.y\n              } : {\n                x: _t4.x - this.state.position.x,\n                y: _t4.y - this.state.position.y\n              };\n\n              _e6 = h.GetRotatedPoint(_e6, {\n                x: 0,\n                y: 0\n              }, this.state.angle), i += _e6.x + \"px \" + _e6.y + \"px, \";\n            }\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n\n        i = i.slice(0, -2), i += \")\";\n        var s = e + \"transform-origin: 0 0; clip-path: \".concat(i, \"; -webkit-clip-path: \").concat(i, \";\") + (this.render.isSafari() && 0 === this.state.angle ? \"transform: translate(\".concat(t.x, \"px, \").concat(t.y, \"px);\") : \"transform: translate3d(\".concat(t.x, \"px, \").concat(t.y, \"px, 0) rotate(\").concat(this.state.angle, \"rad);\"));\n        this.element.style.cssText = s;\n      }\n    }, {\n      key: \"simpleDraw\",\n      value: function simpleDraw(t) {\n        var e = this.render.getRect(),\n            i = e.pageWidth,\n            s = e.height,\n            n = 1 === t ? e.left + e.pageWidth : e.left,\n            h = e.top;\n        this.element.classList.add(\"--simple\"), this.element.style.cssText = \"\\n            position: absolute; \\n            display: block; \\n            height: \".concat(s, \"px; \\n            left: \").concat(n, \"px; \\n            top: \").concat(h, \"px; \\n            width: \").concat(i, \"px; \\n            z-index: \").concat(this.render.getSettings().startZIndex + 1, \";\");\n      }\n    }, {\n      key: \"getElement\",\n      value: function getElement() {\n        return this.element;\n      }\n    }, {\n      key: \"load\",\n      value: function load() {\n        this.isLoad = !0;\n      }\n    }, {\n      key: \"setOrientation\",\n      value: function setOrientation(t) {\n        _get(_getPrototypeOf(r.prototype), \"setOrientation\", this).call(this, t), this.element.classList.remove(\"--left\", \"--right\"), this.element.classList.add(1 === t ? \"--right\" : \"--left\");\n      }\n    }, {\n      key: \"setDrawingDensity\",\n      value: function setDrawingDensity(t) {\n        this.element.classList.remove(\"--soft\", \"--hard\"), this.element.classList.add(\"--\" + t), _get(_getPrototypeOf(r.prototype), \"setDrawingDensity\", this).call(this, t);\n      }\n    }]);\n\n    return r;\n  }(e);\n\n  var o = /*#__PURE__*/function (_s2) {\n    _inherits(o, _s2);\n\n    var _super4 = _createSuper(o);\n\n    function o(t, e, i, s) {\n      var _this5;\n\n      _classCallCheck(this, o);\n\n      _this5 = _super4.call(this, t, e), _this5.element = i, _this5.pagesElement = s;\n      return _this5;\n    }\n\n    _createClass(o, [{\n      key: \"load\",\n      value: function load() {\n        var _iterator4 = _createForOfIteratorHelper(this.pagesElement),\n            _step4;\n\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _t5 = _step4.value;\n\n            var _e7 = new r(this.render, _t5, \"hard\" === _t5.dataset.density ? \"hard\" : \"soft\");\n\n            _e7.load(), this.pages.push(_e7);\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n\n        this.createSpread();\n      }\n    }]);\n\n    return o;\n  }(s);\n\n  var a = /*#__PURE__*/function () {\n    function a(t, e, i, s) {\n      _classCallCheck(this, a);\n\n      this.direction = t, this.corner = e, this.topIntersectPoint = null, this.sideIntersectPoint = null, this.bottomIntersectPoint = null, this.pageWidth = parseInt(i, 10), this.pageHeight = parseInt(s, 10);\n    }\n\n    _createClass(a, [{\n      key: \"calc\",\n      value: function calc(t) {\n        try {\n          return this.position = this.calcAngleAndPosition(t), this.calculateIntersectPoint(this.position), !0;\n        } catch (t) {\n          return !1;\n        }\n      }\n    }, {\n      key: \"getFlippingClipArea\",\n      value: function getFlippingClipArea() {\n        var t = [];\n        var e = !1;\n        return t.push(this.rect.topLeft), t.push(this.topIntersectPoint), null === this.sideIntersectPoint ? e = !0 : (t.push(this.sideIntersectPoint), null === this.bottomIntersectPoint && (e = !1)), t.push(this.bottomIntersectPoint), (e || \"bottom\" === this.corner) && t.push(this.rect.bottomLeft), t;\n      }\n    }, {\n      key: \"getBottomClipArea\",\n      value: function getBottomClipArea() {\n        var t = [];\n        return t.push(this.topIntersectPoint), \"top\" === this.corner ? t.push({\n          x: this.pageWidth,\n          y: 0\n        }) : (null !== this.topIntersectPoint && t.push({\n          x: this.pageWidth,\n          y: 0\n        }), t.push({\n          x: this.pageWidth,\n          y: this.pageHeight\n        })), null !== this.sideIntersectPoint ? h.GetDistanceBetweenTwoPoint(this.sideIntersectPoint, this.topIntersectPoint) >= 10 && t.push(this.sideIntersectPoint) : \"top\" === this.corner && t.push({\n          x: this.pageWidth,\n          y: this.pageHeight\n        }), t.push(this.bottomIntersectPoint), t.push(this.topIntersectPoint), t;\n      }\n    }, {\n      key: \"getAngle\",\n      value: function getAngle() {\n        return 0 === this.direction ? -this.angle : this.angle;\n      }\n    }, {\n      key: \"getRect\",\n      value: function getRect() {\n        return this.rect;\n      }\n    }, {\n      key: \"getPosition\",\n      value: function getPosition() {\n        return this.position;\n      }\n    }, {\n      key: \"getActiveCorner\",\n      value: function getActiveCorner() {\n        return 0 === this.direction ? this.rect.topLeft : this.rect.topRight;\n      }\n    }, {\n      key: \"getDirection\",\n      value: function getDirection() {\n        return this.direction;\n      }\n    }, {\n      key: \"getFlippingProgress\",\n      value: function getFlippingProgress() {\n        return Math.abs((this.position.x - this.pageWidth) / (2 * this.pageWidth) * 100);\n      }\n    }, {\n      key: \"getCorner\",\n      value: function getCorner() {\n        return this.corner;\n      }\n    }, {\n      key: \"getBottomPagePosition\",\n      value: function getBottomPagePosition() {\n        return 1 === this.direction ? {\n          x: this.pageWidth,\n          y: 0\n        } : {\n          x: 0,\n          y: 0\n        };\n      }\n    }, {\n      key: \"getShadowStartPoint\",\n      value: function getShadowStartPoint() {\n        return \"top\" === this.corner ? this.topIntersectPoint : null !== this.sideIntersectPoint ? this.sideIntersectPoint : this.topIntersectPoint;\n      }\n    }, {\n      key: \"getShadowAngle\",\n      value: function getShadowAngle() {\n        var t = h.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(), [{\n          x: 0,\n          y: 0\n        }, {\n          x: this.pageWidth,\n          y: 0\n        }]);\n        return 0 === this.direction ? t : Math.PI - t;\n      }\n    }, {\n      key: \"calcAngleAndPosition\",\n      value: function calcAngleAndPosition(t) {\n        var e = t;\n        if (this.updateAngleAndGeometry(e), e = \"top\" === this.corner ? this.checkPositionAtCenterLine(e, {\n          x: 0,\n          y: 0\n        }, {\n          x: 0,\n          y: this.pageHeight\n        }) : this.checkPositionAtCenterLine(e, {\n          x: 0,\n          y: this.pageHeight\n        }, {\n          x: 0,\n          y: 0\n        }), Math.abs(e.x - this.pageWidth) < 1 && Math.abs(e.y) < 1) throw new Error(\"Point is too small\");\n        return e;\n      }\n    }, {\n      key: \"updateAngleAndGeometry\",\n      value: function updateAngleAndGeometry(t) {\n        this.angle = this.calculateAngle(t), this.rect = this.getPageRect(t);\n      }\n    }, {\n      key: \"calculateAngle\",\n      value: function calculateAngle(t) {\n        var e = this.pageWidth - t.x + 1,\n            i = \"bottom\" === this.corner ? this.pageHeight - t.y : t.y;\n        var s = 2 * Math.acos(e / Math.sqrt(i * i + e * e));\n        i < 0 && (s = -s);\n        var n = Math.PI - s;\n        if (!isFinite(s) || n >= 0 && n < .003) throw new Error(\"The G point is too small\");\n        return \"bottom\" === this.corner && (s = -s), s;\n      }\n    }, {\n      key: \"getPageRect\",\n      value: function getPageRect(t) {\n        return \"top\" === this.corner ? this.getRectFromBasePoint([{\n          x: 0,\n          y: 0\n        }, {\n          x: this.pageWidth,\n          y: 0\n        }, {\n          x: 0,\n          y: this.pageHeight\n        }, {\n          x: this.pageWidth,\n          y: this.pageHeight\n        }], t) : this.getRectFromBasePoint([{\n          x: 0,\n          y: -this.pageHeight\n        }, {\n          x: this.pageWidth,\n          y: -this.pageHeight\n        }, {\n          x: 0,\n          y: 0\n        }, {\n          x: this.pageWidth,\n          y: 0\n        }], t);\n      }\n    }, {\n      key: \"getRectFromBasePoint\",\n      value: function getRectFromBasePoint(t, e) {\n        return {\n          topLeft: this.getRotatedPoint(t[0], e),\n          topRight: this.getRotatedPoint(t[1], e),\n          bottomLeft: this.getRotatedPoint(t[2], e),\n          bottomRight: this.getRotatedPoint(t[3], e)\n        };\n      }\n    }, {\n      key: \"getRotatedPoint\",\n      value: function getRotatedPoint(t, e) {\n        return {\n          x: t.x * Math.cos(this.angle) + t.y * Math.sin(this.angle) + e.x,\n          y: t.y * Math.cos(this.angle) - t.x * Math.sin(this.angle) + e.y\n        };\n      }\n    }, {\n      key: \"calculateIntersectPoint\",\n      value: function calculateIntersectPoint(t) {\n        var e = {\n          left: -1,\n          top: -1,\n          width: this.pageWidth + 2,\n          height: this.pageHeight + 2\n        };\n        \"top\" === this.corner ? (this.topIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [t, this.rect.topRight], [{\n          x: 0,\n          y: 0\n        }, {\n          x: this.pageWidth,\n          y: 0\n        }]), this.sideIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [t, this.rect.bottomLeft], [{\n          x: this.pageWidth,\n          y: 0\n        }, {\n          x: this.pageWidth,\n          y: this.pageHeight\n        }]), this.bottomIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [this.rect.bottomLeft, this.rect.bottomRight], [{\n          x: 0,\n          y: this.pageHeight\n        }, {\n          x: this.pageWidth,\n          y: this.pageHeight\n        }])) : (this.topIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [this.rect.topLeft, this.rect.topRight], [{\n          x: 0,\n          y: 0\n        }, {\n          x: this.pageWidth,\n          y: 0\n        }]), this.sideIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [t, this.rect.topLeft], [{\n          x: this.pageWidth,\n          y: 0\n        }, {\n          x: this.pageWidth,\n          y: this.pageHeight\n        }]), this.bottomIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [this.rect.bottomLeft, this.rect.bottomRight], [{\n          x: 0,\n          y: this.pageHeight\n        }, {\n          x: this.pageWidth,\n          y: this.pageHeight\n        }]));\n      }\n    }, {\n      key: \"checkPositionAtCenterLine\",\n      value: function checkPositionAtCenterLine(t, e, i) {\n        var s = t;\n        var n = h.LimitPointToCircle(e, this.pageWidth, s);\n        s !== n && (s = n, this.updateAngleAndGeometry(s));\n        var r = Math.sqrt(Math.pow(this.pageWidth, 2) + Math.pow(this.pageHeight, 2));\n        var o = this.rect.bottomRight,\n            _a = this.rect.topLeft;\n\n        if (\"bottom\" === this.corner && (o = this.rect.topRight, _a = this.rect.bottomLeft), o.x <= 0) {\n          var _t6 = h.LimitPointToCircle(i, r, _a);\n\n          _t6 !== s && (s = _t6, this.updateAngleAndGeometry(s));\n        }\n\n        return s;\n      }\n    }, {\n      key: \"getSegmentToShadowLine\",\n      value: function getSegmentToShadowLine() {\n        var t = this.getShadowStartPoint();\n        return [t, t !== this.sideIntersectPoint && null !== this.sideIntersectPoint ? this.sideIntersectPoint : this.bottomIntersectPoint];\n      }\n    }]);\n\n    return a;\n  }();\n\n  var g = /*#__PURE__*/function () {\n    function g(t, e) {\n      _classCallCheck(this, g);\n\n      this.flippingPage = null, this.bottomPage = null, this.calc = null, this.state = \"read\", this.render = t, this.app = e;\n    }\n\n    _createClass(g, [{\n      key: \"fold\",\n      value: function fold(t) {\n        this.setState(\"user_fold\"), null === this.calc && this.start(t), this.do(this.render.convertToPage(t));\n      }\n    }, {\n      key: \"flip\",\n      value: function flip(t) {\n        if (this.app.getSettings().disableFlipByClick && !this.isPointOnCorners(t)) return;\n        if (null !== this.calc && this.render.finishAnimation(), !this.start(t)) return;\n        var e = this.getBoundsRect();\n        this.setState(\"flipping\");\n        var i = e.height / 10,\n            s = \"bottom\" === this.calc.getCorner() ? e.height - i : i,\n            n = \"bottom\" === this.calc.getCorner() ? e.height : 0;\n        this.calc.calc({\n          x: e.pageWidth - i,\n          y: s\n        }), this.animateFlippingTo({\n          x: e.pageWidth - i,\n          y: s\n        }, {\n          x: -e.pageWidth,\n          y: n\n        }, !0);\n      }\n    }, {\n      key: \"start\",\n      value: function start(t) {\n        this.reset();\n        var e = this.render.convertToBook(t),\n            i = this.getBoundsRect(),\n            s = this.getDirectionByPoint(e),\n            n = e.y >= i.height / 2 ? \"bottom\" : \"top\";\n        if (!this.checkDirection(s)) return !1;\n\n        try {\n          if (this.flippingPage = this.app.getPageCollection().getFlippingPage(s), this.bottomPage = this.app.getPageCollection().getBottomPage(s), \"landscape\" === this.render.getOrientation()) if (1 === s) {\n            var _t7 = this.app.getPageCollection().nextBy(this.flippingPage);\n\n            null !== _t7 && this.flippingPage.getDensity() !== _t7.getDensity() && (this.flippingPage.setDrawingDensity(\"hard\"), _t7.setDrawingDensity(\"hard\"));\n          } else {\n            var _t8 = this.app.getPageCollection().prevBy(this.flippingPage);\n\n            null !== _t8 && this.flippingPage.getDensity() !== _t8.getDensity() && (this.flippingPage.setDrawingDensity(\"hard\"), _t8.setDrawingDensity(\"hard\"));\n          }\n          return this.render.setDirection(s), this.calc = new a(s, n, i.pageWidth.toString(10), i.height.toString(10)), !0;\n        } catch (t) {\n          return !1;\n        }\n      }\n    }, {\n      key: \"do\",\n      value: function _do(t) {\n        if (null !== this.calc && this.calc.calc(t)) {\n          var _t9 = this.calc.getFlippingProgress();\n\n          this.bottomPage.setArea(this.calc.getBottomClipArea()), this.bottomPage.setPosition(this.calc.getBottomPagePosition()), this.bottomPage.setAngle(0), this.bottomPage.setHardAngle(0), this.flippingPage.setArea(this.calc.getFlippingClipArea()), this.flippingPage.setPosition(this.calc.getActiveCorner()), this.flippingPage.setAngle(this.calc.getAngle()), 0 === this.calc.getDirection() ? this.flippingPage.setHardAngle(90 * (200 - 2 * _t9) / 100) : this.flippingPage.setHardAngle(-90 * (200 - 2 * _t9) / 100), this.render.setPageRect(this.calc.getRect()), this.render.setBottomPage(this.bottomPage), this.render.setFlippingPage(this.flippingPage), this.render.setShadowData(this.calc.getShadowStartPoint(), this.calc.getShadowAngle(), _t9, this.calc.getDirection());\n        }\n      }\n    }, {\n      key: \"flipToPage\",\n      value: function flipToPage(t, e) {\n        var i = this.app.getPageCollection().getCurrentSpreadIndex(),\n            s = this.app.getPageCollection().getSpreadIndexByPage(t);\n\n        try {\n          s > i && (this.app.getPageCollection().setCurrentSpreadIndex(s - 1), this.flipNext(e)), s < i && (this.app.getPageCollection().setCurrentSpreadIndex(s + 1), this.flipPrev(e));\n        } catch (t) {}\n      }\n    }, {\n      key: \"flipNext\",\n      value: function flipNext(t) {\n        this.flip({\n          x: this.render.getRect().left + 2 * this.render.getRect().pageWidth - 10,\n          y: \"top\" === t ? 1 : this.render.getRect().height - 2\n        });\n      }\n    }, {\n      key: \"flipPrev\",\n      value: function flipPrev(t) {\n        this.flip({\n          x: 10,\n          y: \"top\" === t ? 1 : this.render.getRect().height - 2\n        });\n      }\n    }, {\n      key: \"stopMove\",\n      value: function stopMove() {\n        if (null === this.calc) return;\n        var t = this.calc.getPosition(),\n            e = this.getBoundsRect(),\n            i = \"bottom\" === this.calc.getCorner() ? e.height : 0;\n        t.x <= 0 ? this.animateFlippingTo(t, {\n          x: -e.pageWidth,\n          y: i\n        }, !0) : this.animateFlippingTo(t, {\n          x: e.pageWidth,\n          y: i\n        }, !1);\n      }\n    }, {\n      key: \"showCorner\",\n      value: function showCorner(t) {\n        if (!this.checkState(\"read\", \"fold_corner\")) return;\n        var e = this.getBoundsRect(),\n            i = e.pageWidth;\n        if (this.isPointOnCorners(t)) {\n          if (null === this.calc) {\n            if (!this.start(t)) return;\n            this.setState(\"fold_corner\"), this.calc.calc({\n              x: i - 1,\n              y: 1\n            });\n\n            var _s3 = 50,\n                _n = \"bottom\" === this.calc.getCorner() ? e.height - 1 : 1,\n                _h4 = \"bottom\" === this.calc.getCorner() ? e.height - _s3 : _s3;\n\n            this.animateFlippingTo({\n              x: i - 1,\n              y: _n\n            }, {\n              x: i - _s3,\n              y: _h4\n            }, !1, !1);\n          } else this.do(this.render.convertToPage(t));\n        } else this.setState(\"read\"), this.render.finishAnimation(), this.stopMove();\n      }\n    }, {\n      key: \"animateFlippingTo\",\n      value: function animateFlippingTo(t, e, i) {\n        var _this6 = this;\n\n        var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;\n        var n = h.GetCordsFromTwoPoint(t, e),\n            r = [];\n\n        var _iterator5 = _createForOfIteratorHelper(n),\n            _step5;\n\n        try {\n          var _loop = function _loop() {\n            var t = _step5.value;\n            r.push(function () {\n              return _this6.do(t);\n            });\n          };\n\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            _loop();\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n\n        var o = this.getAnimationDuration(n.length);\n        this.render.startAnimation(r, o, function () {\n          _this6.calc && (i && (1 === _this6.calc.getDirection() ? _this6.app.turnToPrevPage() : _this6.app.turnToNextPage()), s && (_this6.render.setBottomPage(null), _this6.render.setFlippingPage(null), _this6.render.clearShadow(), _this6.setState(\"read\"), _this6.reset()));\n        });\n      }\n    }, {\n      key: \"getCalculation\",\n      value: function getCalculation() {\n        return this.calc;\n      }\n    }, {\n      key: \"getState\",\n      value: function getState() {\n        return this.state;\n      }\n    }, {\n      key: \"setState\",\n      value: function setState(t) {\n        this.state !== t && (this.app.updateState(t), this.state = t);\n      }\n    }, {\n      key: \"getDirectionByPoint\",\n      value: function getDirectionByPoint(t) {\n        var e = this.getBoundsRect();\n\n        if (\"portrait\" === this.render.getOrientation()) {\n          if (t.x - e.pageWidth <= e.width / 5) return 1;\n        } else if (t.x < e.width / 2) return 1;\n\n        return 0;\n      }\n    }, {\n      key: \"getAnimationDuration\",\n      value: function getAnimationDuration(t) {\n        var e = this.app.getSettings().flippingTime;\n        return t >= 1e3 ? e : t / 1e3 * e;\n      }\n    }, {\n      key: \"checkDirection\",\n      value: function checkDirection(t) {\n        return 0 === t ? this.app.getCurrentPageIndex() < this.app.getPageCount() - 1 : this.app.getCurrentPageIndex() >= 1;\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        this.calc = null, this.flippingPage = null, this.bottomPage = null;\n      }\n    }, {\n      key: \"getBoundsRect\",\n      value: function getBoundsRect() {\n        return this.render.getRect();\n      }\n    }, {\n      key: \"checkState\",\n      value: function checkState() {\n        for (var _len = arguments.length, t = new Array(_len), _key = 0; _key < _len; _key++) {\n          t[_key] = arguments[_key];\n        }\n\n        for (var _i8 = 0, _t10 = t; _i8 < _t10.length; _i8++) {\n          var _e8 = _t10[_i8];\n          if (this.state === _e8) return !0;\n        }\n\n        return !1;\n      }\n    }, {\n      key: \"isPointOnCorners\",\n      value: function isPointOnCorners(t) {\n        var e = this.getBoundsRect(),\n            i = e.pageWidth,\n            s = Math.sqrt(Math.pow(i, 2) + Math.pow(e.height, 2)) / 5,\n            n = this.render.convertToBook(t);\n        return n.x > 0 && n.y > 0 && n.x < e.width && n.y < e.height && (n.x < s || n.x > e.width - s) && (n.y < s || n.y > e.height - s);\n      }\n    }]);\n\n    return g;\n  }();\n\n  var l = /*#__PURE__*/function () {\n    function l(t, e) {\n      _classCallCheck(this, l);\n\n      this.leftPage = null, this.rightPage = null, this.flippingPage = null, this.bottomPage = null, this.direction = null, this.orientation = null, this.shadow = null, this.animation = null, this.pageRect = null, this.boundsRect = null, this.timer = 0, this.safari = !1, this.setting = e, this.app = t;\n      var i = new RegExp(\"Version\\\\/[\\\\d\\\\.]+.*Safari/\");\n      this.safari = null !== i.exec(window.navigator.userAgent);\n    }\n\n    _createClass(l, [{\n      key: \"render\",\n      value: function render(t) {\n        if (null !== this.animation) {\n          var _e9 = Math.round((t - this.animation.startedAt) / this.animation.durationFrame);\n\n          _e9 < this.animation.frames.length ? this.animation.frames[_e9]() : (this.animation.onAnimateEnd(), this.animation = null);\n        }\n\n        this.timer = t, this.drawFrame();\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this7 = this;\n\n        this.update();\n\n        var t = function t(e) {\n          _this7.render(e), requestAnimationFrame(t);\n        };\n\n        requestAnimationFrame(t);\n      }\n    }, {\n      key: \"startAnimation\",\n      value: function startAnimation(t, e, i) {\n        this.finishAnimation(), this.animation = {\n          frames: t,\n          duration: e,\n          durationFrame: e / t.length,\n          onAnimateEnd: i,\n          startedAt: this.timer\n        };\n      }\n    }, {\n      key: \"finishAnimation\",\n      value: function finishAnimation() {\n        null !== this.animation && (this.animation.frames[this.animation.frames.length - 1](), null !== this.animation.onAnimateEnd && this.animation.onAnimateEnd()), this.animation = null;\n      }\n    }, {\n      key: \"update\",\n      value: function update() {\n        this.boundsRect = null;\n        var t = this.calculateBoundsRect();\n        this.orientation !== t && (this.orientation = t, this.app.updateOrientation(t));\n      }\n    }, {\n      key: \"calculateBoundsRect\",\n      value: function calculateBoundsRect() {\n        var t = \"landscape\";\n        var e = this.getBlockWidth(),\n            i = e / 2,\n            s = this.getBlockHeight() / 2,\n            n = this.setting.width / this.setting.height;\n        var h = this.setting.width,\n            r = this.setting.height,\n            o = i - h;\n        return \"stretch\" === this.setting.size ? (e < 2 * this.setting.minWidth && this.app.getSettings().usePortrait && (t = \"portrait\"), h = \"portrait\" === t ? this.getBlockWidth() : this.getBlockWidth() / 2, h > this.setting.maxWidth && (h = this.setting.maxWidth), r = h / n, r > this.getBlockHeight() && (r = this.getBlockHeight(), h = r * n), o = \"portrait\" === t ? i - h / 2 - h : i - h) : e < 2 * h && this.app.getSettings().usePortrait && (t = \"portrait\", o = i - h / 2 - h), this.boundsRect = {\n          left: o,\n          top: s - r / 2,\n          width: 2 * h,\n          height: r,\n          pageWidth: h\n        }, t;\n      }\n    }, {\n      key: \"setShadowData\",\n      value: function setShadowData(t, e, i, s) {\n        if (!this.app.getSettings().drawShadow) return;\n        var n = 100 * this.getSettings().maxShadowOpacity;\n        this.shadow = {\n          pos: t,\n          angle: e,\n          width: 3 * this.getRect().pageWidth / 4 * i / 100,\n          opacity: (100 - i) * n / 100 / 100,\n          direction: s,\n          progress: 2 * i\n        };\n      }\n    }, {\n      key: \"clearShadow\",\n      value: function clearShadow() {\n        this.shadow = null;\n      }\n    }, {\n      key: \"getBlockWidth\",\n      value: function getBlockWidth() {\n        return this.app.getUI().getDistElement().offsetWidth;\n      }\n    }, {\n      key: \"getBlockHeight\",\n      value: function getBlockHeight() {\n        return this.app.getUI().getDistElement().offsetHeight;\n      }\n    }, {\n      key: \"getDirection\",\n      value: function getDirection() {\n        return this.direction;\n      }\n    }, {\n      key: \"getRect\",\n      value: function getRect() {\n        return null === this.boundsRect && this.calculateBoundsRect(), this.boundsRect;\n      }\n    }, {\n      key: \"getSettings\",\n      value: function getSettings() {\n        return this.app.getSettings();\n      }\n    }, {\n      key: \"getOrientation\",\n      value: function getOrientation() {\n        return this.orientation;\n      }\n    }, {\n      key: \"setPageRect\",\n      value: function setPageRect(t) {\n        this.pageRect = t;\n      }\n    }, {\n      key: \"setDirection\",\n      value: function setDirection(t) {\n        this.direction = t;\n      }\n    }, {\n      key: \"setRightPage\",\n      value: function setRightPage(t) {\n        null !== t && t.setOrientation(1), this.rightPage = t;\n      }\n    }, {\n      key: \"setLeftPage\",\n      value: function setLeftPage(t) {\n        null !== t && t.setOrientation(0), this.leftPage = t;\n      }\n    }, {\n      key: \"setBottomPage\",\n      value: function setBottomPage(t) {\n        null !== t && t.setOrientation(1 === this.direction ? 0 : 1), this.bottomPage = t;\n      }\n    }, {\n      key: \"setFlippingPage\",\n      value: function setFlippingPage(t) {\n        null !== t && t.setOrientation(0 === this.direction && \"portrait\" !== this.orientation ? 0 : 1), this.flippingPage = t;\n      }\n    }, {\n      key: \"convertToBook\",\n      value: function convertToBook(t) {\n        var e = this.getRect();\n        return {\n          x: t.x - e.left,\n          y: t.y - e.top\n        };\n      }\n    }, {\n      key: \"isSafari\",\n      value: function isSafari() {\n        return this.safari;\n      }\n    }, {\n      key: \"convertToPage\",\n      value: function convertToPage(t, e) {\n        e || (e = this.direction);\n        var i = this.getRect();\n        return {\n          x: 0 === e ? t.x - i.left - i.width / 2 : i.width / 2 - t.x + i.left,\n          y: t.y - i.top\n        };\n      }\n    }, {\n      key: \"convertToGlobal\",\n      value: function convertToGlobal(t, e) {\n        if (e || (e = this.direction), null == t) return null;\n        var i = this.getRect();\n        return {\n          x: 0 === e ? t.x + i.left + i.width / 2 : i.width / 2 - t.x + i.left,\n          y: t.y + i.top\n        };\n      }\n    }, {\n      key: \"convertRectToGlobal\",\n      value: function convertRectToGlobal(t, e) {\n        return e || (e = this.direction), {\n          topLeft: this.convertToGlobal(t.topLeft, e),\n          topRight: this.convertToGlobal(t.topRight, e),\n          bottomLeft: this.convertToGlobal(t.bottomLeft, e),\n          bottomRight: this.convertToGlobal(t.bottomRight, e)\n        };\n      }\n    }]);\n\n    return l;\n  }();\n\n  var d = /*#__PURE__*/function (_l) {\n    _inherits(d, _l);\n\n    var _super5 = _createSuper(d);\n\n    function d(t, e, i) {\n      var _this8;\n\n      _classCallCheck(this, d);\n\n      _this8 = _super5.call(this, t, e), _this8.canvas = i, _this8.ctx = i.getContext(\"2d\");\n      return _this8;\n    }\n\n    _createClass(d, [{\n      key: \"getContext\",\n      value: function getContext() {\n        return this.ctx;\n      }\n    }, {\n      key: \"reload\",\n      value: function reload() {}\n    }, {\n      key: \"drawFrame\",\n      value: function drawFrame() {\n        this.clear(), \"portrait\" !== this.orientation && null != this.leftPage && this.leftPage.simpleDraw(0), null != this.rightPage && this.rightPage.simpleDraw(1), null != this.bottomPage && this.bottomPage.draw(), this.drawBookShadow(), null != this.flippingPage && this.flippingPage.draw(), null != this.shadow && (this.drawOuterShadow(), this.drawInnerShadow());\n        var t = this.getRect();\n        \"portrait\" === this.orientation && (this.ctx.beginPath(), this.ctx.rect(t.left + t.pageWidth, t.top, t.width, t.height), this.ctx.clip());\n      }\n    }, {\n      key: \"drawBookShadow\",\n      value: function drawBookShadow() {\n        var t = this.getRect();\n        this.ctx.save(), this.ctx.beginPath();\n        var e = t.width / 20;\n        this.ctx.rect(t.left, t.top, t.width, t.height);\n        var i = {\n          x: t.left + t.width / 2 - e / 2,\n          y: 0\n        };\n        this.ctx.translate(i.x, i.y);\n        var s = this.ctx.createLinearGradient(0, 0, e, 0);\n        s.addColorStop(0, \"rgba(0, 0, 0, 0)\"), s.addColorStop(.4, \"rgba(0, 0, 0, 0.2)\"), s.addColorStop(.49, \"rgba(0, 0, 0, 0.1)\"), s.addColorStop(.5, \"rgba(0, 0, 0, 0.5)\"), s.addColorStop(.51, \"rgba(0, 0, 0, 0.4)\"), s.addColorStop(1, \"rgba(0, 0, 0, 0)\"), this.ctx.clip(), this.ctx.fillStyle = s, this.ctx.fillRect(0, 0, e, 2 * t.height), this.ctx.restore();\n      }\n    }, {\n      key: \"drawOuterShadow\",\n      value: function drawOuterShadow() {\n        var t = this.getRect();\n        this.ctx.save(), this.ctx.beginPath(), this.ctx.rect(t.left, t.top, t.width, t.height);\n        var e = this.convertToGlobal({\n          x: this.shadow.pos.x,\n          y: this.shadow.pos.y\n        });\n        this.ctx.translate(e.x, e.y), this.ctx.rotate(Math.PI + this.shadow.angle + Math.PI / 2);\n        var i = this.ctx.createLinearGradient(0, 0, this.shadow.width, 0);\n        0 === this.shadow.direction ? (this.ctx.translate(0, -100), i.addColorStop(0, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), i.addColorStop(1, \"rgba(0, 0, 0, 0)\")) : (this.ctx.translate(-this.shadow.width, -100), i.addColorStop(0, \"rgba(0, 0, 0, 0)\"), i.addColorStop(1, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\")), this.ctx.clip(), this.ctx.fillStyle = i, this.ctx.fillRect(0, 0, this.shadow.width, 2 * t.height), this.ctx.restore();\n      }\n    }, {\n      key: \"drawInnerShadow\",\n      value: function drawInnerShadow() {\n        var t = this.getRect();\n        this.ctx.save(), this.ctx.beginPath();\n        var e = this.convertToGlobal({\n          x: this.shadow.pos.x,\n          y: this.shadow.pos.y\n        }),\n            i = this.convertRectToGlobal(this.pageRect);\n        this.ctx.moveTo(i.topLeft.x, i.topLeft.y), this.ctx.lineTo(i.topRight.x, i.topRight.y), this.ctx.lineTo(i.bottomRight.x, i.bottomRight.y), this.ctx.lineTo(i.bottomLeft.x, i.bottomLeft.y), this.ctx.translate(e.x, e.y), this.ctx.rotate(Math.PI + this.shadow.angle + Math.PI / 2);\n        var s = 3 * this.shadow.width / 4,\n            n = this.ctx.createLinearGradient(0, 0, s, 0);\n        0 === this.shadow.direction ? (this.ctx.translate(-s, -100), n.addColorStop(1, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(.9, \"rgba(0, 0, 0, 0.05)\"), n.addColorStop(.7, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(0, \"rgba(0, 0, 0, 0)\")) : (this.ctx.translate(0, -100), n.addColorStop(0, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(.1, \"rgba(0, 0, 0, 0.05)\"), n.addColorStop(.3, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(1, \"rgba(0, 0, 0, 0)\")), this.ctx.clip(), this.ctx.fillStyle = n, this.ctx.fillRect(0, 0, s, 2 * t.height), this.ctx.restore();\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        this.ctx.fillStyle = \"white\", this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n      }\n    }]);\n\n    return d;\n  }(l);\n\n  var p = /*#__PURE__*/function () {\n    function p(t, e, i) {\n      var _this9 = this;\n\n      _classCallCheck(this, p);\n\n      this.touchPoint = null, this.swipeTimeout = 250, this.onResize = function () {\n        _this9.update();\n      }, this.onMouseDown = function (t) {\n        if (_this9.checkTarget(t.target)) {\n          var _e10 = _this9.getMousePos(t.clientX, t.clientY);\n\n          _this9.app.startUserTouch(_e10), t.preventDefault();\n        }\n      }, this.onTouchStart = function (t) {\n        if (_this9.checkTarget(t.target) && t.changedTouches.length > 0) {\n          var _e11 = t.changedTouches[0],\n              _i9 = _this9.getMousePos(_e11.clientX, _e11.clientY);\n\n          _this9.touchPoint = {\n            point: _i9,\n            time: Date.now()\n          }, setTimeout(function () {\n            null !== _this9.touchPoint && _this9.app.startUserTouch(_i9);\n          }, _this9.swipeTimeout), _this9.app.getSettings().mobileScrollSupport || t.preventDefault();\n        }\n      }, this.onMouseUp = function (t) {\n        var e = _this9.getMousePos(t.clientX, t.clientY);\n\n        _this9.app.userStop(e);\n      }, this.onMouseMove = function (t) {\n        var e = _this9.getMousePos(t.clientX, t.clientY);\n\n        _this9.app.userMove(e, !1);\n      }, this.onTouchMove = function (t) {\n        if (t.changedTouches.length > 0) {\n          var _e12 = t.changedTouches[0],\n              _i10 = _this9.getMousePos(_e12.clientX, _e12.clientY);\n\n          _this9.app.getSettings().mobileScrollSupport ? (null !== _this9.touchPoint && (Math.abs(_this9.touchPoint.point.x - _i10.x) > 10 || \"read\" !== _this9.app.getState()) && t.cancelable && _this9.app.userMove(_i10, !0), \"read\" !== _this9.app.getState() && t.preventDefault()) : _this9.app.userMove(_i10, !0);\n        }\n      }, this.onTouchEnd = function (t) {\n        if (t.changedTouches.length > 0) {\n          var _e13 = t.changedTouches[0],\n              _i11 = _this9.getMousePos(_e13.clientX, _e13.clientY);\n\n          var _s4 = !1;\n\n          if (null !== _this9.touchPoint) {\n            var _t11 = _i11.x - _this9.touchPoint.point.x,\n                _e14 = Math.abs(_i11.y - _this9.touchPoint.point.y);\n\n            Math.abs(_t11) > _this9.swipeDistance && _e14 < 2 * _this9.swipeDistance && Date.now() - _this9.touchPoint.time < _this9.swipeTimeout && (_t11 > 0 ? _this9.app.flipPrev(_this9.touchPoint.point.y < _this9.app.getRender().getRect().height / 2 ? \"top\" : \"bottom\") : _this9.app.flipNext(_this9.touchPoint.point.y < _this9.app.getRender().getRect().height / 2 ? \"top\" : \"bottom\"), _s4 = !0), _this9.touchPoint = null;\n          }\n\n          _this9.app.userStop(_i11, _s4);\n        }\n      }, this.parentElement = t, t.classList.add(\"stf__parent\"), t.insertAdjacentHTML(\"afterbegin\", '<div class=\"stf__wrapper\"></div>'), this.wrapper = t.querySelector(\".stf__wrapper\"), this.app = e;\n      var s = this.app.getSettings().usePortrait ? 1 : 2;\n      t.style.minWidth = i.minWidth * s + \"px\", t.style.minHeight = i.minHeight + \"px\", \"fixed\" === i.size && (t.style.minWidth = i.width * s + \"px\", t.style.minHeight = i.height + \"px\"), i.autoSize && (t.style.width = \"100%\", t.style.maxWidth = 2 * i.maxWidth + \"px\"), t.style.display = \"block\", window.addEventListener(\"resize\", this.onResize, !1), this.swipeDistance = i.swipeDistance;\n    }\n\n    _createClass(p, [{\n      key: \"destroy\",\n      value: function destroy() {\n        this.app.getSettings().useMouseEvents && this.removeHandlers(), this.distElement.remove(), this.wrapper.remove();\n      }\n    }, {\n      key: \"getDistElement\",\n      value: function getDistElement() {\n        return this.distElement;\n      }\n    }, {\n      key: \"getWrapper\",\n      value: function getWrapper() {\n        return this.wrapper;\n      }\n    }, {\n      key: \"setOrientationStyle\",\n      value: function setOrientationStyle(t) {\n        this.wrapper.classList.remove(\"--portrait\", \"--landscape\"), \"portrait\" === t ? (this.app.getSettings().autoSize && (this.wrapper.style.paddingBottom = this.app.getSettings().height / this.app.getSettings().width * 100 + \"%\"), this.wrapper.classList.add(\"--portrait\")) : (this.app.getSettings().autoSize && (this.wrapper.style.paddingBottom = this.app.getSettings().height / (2 * this.app.getSettings().width) * 100 + \"%\"), this.wrapper.classList.add(\"--landscape\")), this.update();\n      }\n    }, {\n      key: \"removeHandlers\",\n      value: function removeHandlers() {\n        window.removeEventListener(\"resize\", this.onResize), this.distElement.removeEventListener(\"mousedown\", this.onMouseDown), this.distElement.removeEventListener(\"touchstart\", this.onTouchStart), window.removeEventListener(\"mousemove\", this.onMouseMove), window.removeEventListener(\"touchmove\", this.onTouchMove), window.removeEventListener(\"mouseup\", this.onMouseUp), window.removeEventListener(\"touchend\", this.onTouchEnd);\n      }\n    }, {\n      key: \"setHandlers\",\n      value: function setHandlers() {\n        window.addEventListener(\"resize\", this.onResize, !1), this.app.getSettings().useMouseEvents && (this.distElement.addEventListener(\"mousedown\", this.onMouseDown), this.distElement.addEventListener(\"touchstart\", this.onTouchStart), window.addEventListener(\"mousemove\", this.onMouseMove), window.addEventListener(\"touchmove\", this.onTouchMove, {\n          passive: !this.app.getSettings().mobileScrollSupport\n        }), window.addEventListener(\"mouseup\", this.onMouseUp), window.addEventListener(\"touchend\", this.onTouchEnd));\n      }\n    }, {\n      key: \"getMousePos\",\n      value: function getMousePos(t, e) {\n        var i = this.distElement.getBoundingClientRect();\n        return {\n          x: t - i.left,\n          y: e - i.top\n        };\n      }\n    }, {\n      key: \"checkTarget\",\n      value: function checkTarget(t) {\n        return !this.app.getSettings().clickEventForward || ![\"a\", \"button\"].includes(t.tagName.toLowerCase());\n      }\n    }]);\n\n    return p;\n  }();\n\n  var c = /*#__PURE__*/function (_p) {\n    _inherits(c, _p);\n\n    var _super6 = _createSuper(c);\n\n    function c(t, e, i, s) {\n      var _this10;\n\n      _classCallCheck(this, c);\n\n      _this10 = _super6.call(this, t, e, i), _this10.wrapper.insertAdjacentHTML(\"afterbegin\", '<div class=\"stf__block\"></div>'), _this10.distElement = t.querySelector(\".stf__block\"), _this10.items = s;\n\n      var _iterator6 = _createForOfIteratorHelper(s),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _t12 = _step6.value;\n\n          _this10.distElement.appendChild(_t12);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n\n      _this10.setHandlers();\n\n      return _this10;\n    }\n\n    _createClass(c, [{\n      key: \"clear\",\n      value: function clear() {\n        var _iterator7 = _createForOfIteratorHelper(this.items),\n            _step7;\n\n        try {\n          for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n            var _t13 = _step7.value;\n            this.parentElement.appendChild(_t13);\n          }\n        } catch (err) {\n          _iterator7.e(err);\n        } finally {\n          _iterator7.f();\n        }\n      }\n    }, {\n      key: \"updateItems\",\n      value: function updateItems(t) {\n        this.removeHandlers(), this.distElement.innerHTML = \"\";\n\n        var _iterator8 = _createForOfIteratorHelper(t),\n            _step8;\n\n        try {\n          for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n            var _e15 = _step8.value;\n            this.distElement.appendChild(_e15);\n          }\n        } catch (err) {\n          _iterator8.e(err);\n        } finally {\n          _iterator8.f();\n        }\n\n        this.items = t, this.setHandlers();\n      }\n    }, {\n      key: \"update\",\n      value: function update() {\n        this.app.getRender().update();\n      }\n    }]);\n\n    return c;\n  }(p);\n\n  var u = /*#__PURE__*/function (_p2) {\n    _inherits(u, _p2);\n\n    var _super7 = _createSuper(u);\n\n    function u(t, e, i) {\n      var _this11;\n\n      _classCallCheck(this, u);\n\n      _this11 = _super7.call(this, t, e, i), _this11.wrapper.innerHTML = '<canvas class=\"stf__canvas\"></canvas>', _this11.canvas = t.querySelectorAll(\"canvas\")[0], _this11.distElement = _this11.canvas, _this11.resizeCanvas(), _this11.setHandlers();\n      return _this11;\n    }\n\n    _createClass(u, [{\n      key: \"resizeCanvas\",\n      value: function resizeCanvas() {\n        var t = getComputedStyle(this.canvas),\n            e = parseInt(t.getPropertyValue(\"width\"), 10),\n            i = parseInt(t.getPropertyValue(\"height\"), 10);\n        this.canvas.width = e, this.canvas.height = i;\n      }\n    }, {\n      key: \"getCanvas\",\n      value: function getCanvas() {\n        return this.canvas;\n      }\n    }, {\n      key: \"update\",\n      value: function update() {\n        this.resizeCanvas(), this.app.getRender().update();\n      }\n    }]);\n\n    return u;\n  }(p);\n\n  var w = /*#__PURE__*/function (_l2) {\n    _inherits(w, _l2);\n\n    var _super8 = _createSuper(w);\n\n    function w(t, e, i) {\n      var _this12;\n\n      _classCallCheck(this, w);\n\n      _this12 = _super8.call(this, t, e), _this12.outerShadow = null, _this12.innerShadow = null, _this12.hardShadow = null, _this12.hardInnerShadow = null, _this12.element = i, _this12.createShadows();\n      return _this12;\n    }\n\n    _createClass(w, [{\n      key: \"createShadows\",\n      value: function createShadows() {\n        this.element.insertAdjacentHTML(\"beforeend\", '<div class=\"stf__outerShadow\"></div>\\n             <div class=\"stf__innerShadow\"></div>\\n             <div class=\"stf__hardShadow\"></div>\\n             <div class=\"stf__hardInnerShadow\"></div>'), this.outerShadow = this.element.querySelector(\".stf__outerShadow\"), this.innerShadow = this.element.querySelector(\".stf__innerShadow\"), this.hardShadow = this.element.querySelector(\".stf__hardShadow\"), this.hardInnerShadow = this.element.querySelector(\".stf__hardInnerShadow\");\n      }\n    }, {\n      key: \"clearShadow\",\n      value: function clearShadow() {\n        _get(_getPrototypeOf(w.prototype), \"clearShadow\", this).call(this), this.outerShadow.style.cssText = \"display: none\", this.innerShadow.style.cssText = \"display: none\", this.hardShadow.style.cssText = \"display: none\", this.hardInnerShadow.style.cssText = \"display: none\";\n      }\n    }, {\n      key: \"reload\",\n      value: function reload() {\n        this.element.querySelector(\".stf__outerShadow\") || this.createShadows();\n      }\n    }, {\n      key: \"drawHardInnerShadow\",\n      value: function drawHardInnerShadow() {\n        var t = this.getRect(),\n            e = this.shadow.progress > 100 ? 200 - this.shadow.progress : this.shadow.progress;\n        var i = (100 - e) * (2.5 * t.pageWidth) / 100 + 20;\n        i > t.pageWidth && (i = t.pageWidth);\n        var s = \"\\n            display: block;\\n            z-index: \".concat((this.getSettings().startZIndex + 5).toString(10), \";\\n            width: \").concat(i, \"px;\\n            height: \").concat(t.height, \"px;\\n            background: linear-gradient(to right,\\n                rgba(0, 0, 0, \").concat(this.shadow.opacity * e / 100, \") 5%,\\n                rgba(0, 0, 0, 0) 100%);\\n            left: \").concat(t.left + t.width / 2, \"px;\\n            transform-origin: 0 0;\\n        \");\n        s += 0 === this.getDirection() && this.shadow.progress > 100 || 1 === this.getDirection() && this.shadow.progress <= 100 ? \"transform: translate3d(0, 0, 0);\" : \"transform: translate3d(0, 0, 0) rotateY(180deg);\", this.hardInnerShadow.style.cssText = s;\n      }\n    }, {\n      key: \"drawHardOuterShadow\",\n      value: function drawHardOuterShadow() {\n        var t = this.getRect();\n        var e = (100 - (this.shadow.progress > 100 ? 200 - this.shadow.progress : this.shadow.progress)) * (2.5 * t.pageWidth) / 100 + 20;\n        e > t.pageWidth && (e = t.pageWidth);\n        var i = \"\\n            display: block;\\n            z-index: \".concat((this.getSettings().startZIndex + 4).toString(10), \";\\n            width: \").concat(e, \"px;\\n            height: \").concat(t.height, \"px;\\n            background: linear-gradient(to left, rgba(0, 0, 0, \").concat(this.shadow.opacity, \") 5%, rgba(0, 0, 0, 0) 100%);\\n            left: \").concat(t.left + t.width / 2, \"px;\\n            transform-origin: 0 0;\\n        \");\n        i += 0 === this.getDirection() && this.shadow.progress > 100 || 1 === this.getDirection() && this.shadow.progress <= 100 ? \"transform: translate3d(0, 0, 0) rotateY(180deg);\" : \"transform: translate3d(0, 0, 0);\", this.hardShadow.style.cssText = i;\n      }\n    }, {\n      key: \"drawInnerShadow\",\n      value: function drawInnerShadow() {\n        var t = this.getRect(),\n            e = 3 * this.shadow.width / 4,\n            i = 0 === this.getDirection() ? e : 0,\n            s = 0 === this.getDirection() ? \"to left\" : \"to right\",\n            n = this.convertToGlobal(this.shadow.pos),\n            r = this.shadow.angle + 3 * Math.PI / 2,\n            o = [this.pageRect.topLeft, this.pageRect.topRight, this.pageRect.bottomRight, this.pageRect.bottomLeft];\n        var a = \"polygon( \";\n\n        for (var _i12 = 0, _o2 = o; _i12 < _o2.length; _i12++) {\n          var _t14 = _o2[_i12];\n\n          var _e16 = 1 === this.getDirection() ? {\n            x: -_t14.x + this.shadow.pos.x,\n            y: _t14.y - this.shadow.pos.y\n          } : {\n            x: _t14.x - this.shadow.pos.x,\n            y: _t14.y - this.shadow.pos.y\n          };\n\n          _e16 = h.GetRotatedPoint(_e16, {\n            x: i,\n            y: 100\n          }, r), a += _e16.x + \"px \" + _e16.y + \"px, \";\n        }\n\n        a = a.slice(0, -2), a += \")\";\n        var g = \"\\n            display: block;\\n            z-index: \".concat((this.getSettings().startZIndex + 10).toString(10), \";\\n            width: \").concat(e, \"px;\\n            height: \").concat(2 * t.height, \"px;\\n            background: linear-gradient(\").concat(s, \",\\n                rgba(0, 0, 0, \").concat(this.shadow.opacity, \") 5%,\\n                rgba(0, 0, 0, 0.05) 15%,\\n                rgba(0, 0, 0, \").concat(this.shadow.opacity, \") 35%,\\n                rgba(0, 0, 0, 0) 100%);\\n            transform-origin: \").concat(i, \"px 100px;\\n            transform: translate3d(\").concat(n.x - i, \"px, \").concat(n.y - 100, \"px, 0) rotate(\").concat(r, \"rad);\\n            clip-path: \").concat(a, \";\\n            -webkit-clip-path: \").concat(a, \";\\n        \");\n        this.innerShadow.style.cssText = g;\n      }\n    }, {\n      key: \"drawOuterShadow\",\n      value: function drawOuterShadow() {\n        var t = this.getRect(),\n            e = this.convertToGlobal({\n          x: this.shadow.pos.x,\n          y: this.shadow.pos.y\n        }),\n            i = this.shadow.angle + 3 * Math.PI / 2,\n            s = 1 === this.getDirection() ? this.shadow.width : 0,\n            n = 0 === this.getDirection() ? \"to right\" : \"to left\",\n            r = [{\n          x: 0,\n          y: 0\n        }, {\n          x: t.pageWidth,\n          y: 0\n        }, {\n          x: t.pageWidth,\n          y: t.height\n        }, {\n          x: 0,\n          y: t.height\n        }];\n        var o = \"polygon( \";\n\n        for (var _i13 = 0, _r = r; _i13 < _r.length; _i13++) {\n          var _t15 = _r[_i13];\n\n          if (null !== _t15) {\n            var _e17 = 1 === this.getDirection() ? {\n              x: -_t15.x + this.shadow.pos.x,\n              y: _t15.y - this.shadow.pos.y\n            } : {\n              x: _t15.x - this.shadow.pos.x,\n              y: _t15.y - this.shadow.pos.y\n            };\n\n            _e17 = h.GetRotatedPoint(_e17, {\n              x: s,\n              y: 100\n            }, i), o += _e17.x + \"px \" + _e17.y + \"px, \";\n          }\n        }\n\n        o = o.slice(0, -2), o += \")\";\n        var a = \"\\n            display: block;\\n            z-index: \".concat((this.getSettings().startZIndex + 10).toString(10), \";\\n            width: \").concat(this.shadow.width, \"px;\\n            height: \").concat(2 * t.height, \"px;\\n            background: linear-gradient(\").concat(n, \", rgba(0, 0, 0, \").concat(this.shadow.opacity, \"), rgba(0, 0, 0, 0));\\n            transform-origin: \").concat(s, \"px 100px;\\n            transform: translate3d(\").concat(e.x - s, \"px, \").concat(e.y - 100, \"px, 0) rotate(\").concat(i, \"rad);\\n            clip-path: \").concat(o, \";\\n            -webkit-clip-path: \").concat(o, \";\\n        \");\n        this.outerShadow.style.cssText = a;\n      }\n    }, {\n      key: \"drawLeftPage\",\n      value: function drawLeftPage() {\n        \"portrait\" !== this.orientation && null !== this.leftPage && (1 === this.direction && null !== this.flippingPage && \"hard\" === this.flippingPage.getDrawingDensity() ? (this.leftPage.getElement().style.zIndex = (this.getSettings().startZIndex + 5).toString(10), this.leftPage.setHardDrawingAngle(180 + this.flippingPage.getHardAngle()), this.leftPage.draw(this.flippingPage.getDrawingDensity())) : this.leftPage.simpleDraw(0));\n      }\n    }, {\n      key: \"drawRightPage\",\n      value: function drawRightPage() {\n        null !== this.rightPage && (0 === this.direction && null !== this.flippingPage && \"hard\" === this.flippingPage.getDrawingDensity() ? (this.rightPage.getElement().style.zIndex = (this.getSettings().startZIndex + 5).toString(10), this.rightPage.setHardDrawingAngle(180 + this.flippingPage.getHardAngle()), this.rightPage.draw(this.flippingPage.getDrawingDensity())) : this.rightPage.simpleDraw(1));\n      }\n    }, {\n      key: \"drawBottomPage\",\n      value: function drawBottomPage() {\n        if (null === this.bottomPage) return;\n        var t = null != this.flippingPage ? this.flippingPage.getDrawingDensity() : null;\n        \"portrait\" === this.orientation && 1 === this.direction || (this.bottomPage.getElement().style.zIndex = (this.getSettings().startZIndex + 3).toString(10), this.bottomPage.draw(t));\n      }\n    }, {\n      key: \"drawFrame\",\n      value: function drawFrame() {\n        this.clear(), this.drawLeftPage(), this.drawRightPage(), this.drawBottomPage(), null != this.flippingPage && (this.flippingPage.getElement().style.zIndex = (this.getSettings().startZIndex + 5).toString(10), this.flippingPage.draw()), null != this.shadow && null !== this.flippingPage && (\"soft\" === this.flippingPage.getDrawingDensity() ? (this.drawOuterShadow(), this.drawInnerShadow()) : (this.drawHardOuterShadow(), this.drawHardInnerShadow()));\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        var _iterator9 = _createForOfIteratorHelper(this.app.getPageCollection().getPages()),\n            _step9;\n\n        try {\n          for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n            var _t16 = _step9.value;\n            _t16 !== this.leftPage && _t16 !== this.rightPage && _t16 !== this.flippingPage && _t16 !== this.bottomPage && (_t16.getElement().style.cssText = \"display: none\"), _t16.getTemporaryCopy() !== this.flippingPage && _t16.hideTemporaryCopy();\n          }\n        } catch (err) {\n          _iterator9.e(err);\n        } finally {\n          _iterator9.f();\n        }\n      }\n    }, {\n      key: \"update\",\n      value: function update() {\n        _get(_getPrototypeOf(w.prototype), \"update\", this).call(this), null !== this.rightPage && this.rightPage.setOrientation(1), null !== this.leftPage && this.leftPage.setOrientation(0);\n      }\n    }]);\n\n    return w;\n  }(l);\n\n  var x = /*#__PURE__*/function () {\n    function x() {\n      _classCallCheck(this, x);\n\n      this._default = {\n        startPage: 0,\n        size: \"fixed\",\n        width: 0,\n        height: 0,\n        minWidth: 0,\n        maxWidth: 0,\n        minHeight: 0,\n        maxHeight: 0,\n        drawShadow: !0,\n        flippingTime: 1e3,\n        usePortrait: !0,\n        startZIndex: 0,\n        autoSize: !0,\n        maxShadowOpacity: 1,\n        showCover: !1,\n        mobileScrollSupport: !0,\n        swipeDistance: 30,\n        clickEventForward: !0,\n        useMouseEvents: !0,\n        showPageCorners: !0,\n        disableFlipByClick: !1\n      };\n    }\n\n    _createClass(x, [{\n      key: \"getSettings\",\n      value: function getSettings(t) {\n        var e = this._default;\n        if (Object.assign(e, t), \"stretch\" !== e.size && \"fixed\" !== e.size) throw new Error('Invalid size type. Available only \"fixed\" and \"stretch\" value');\n        if (e.width <= 0 || e.height <= 0) throw new Error(\"Invalid width or height\");\n        if (e.flippingTime <= 0) throw new Error(\"Invalid flipping time\");\n        return \"stretch\" === e.size ? (e.minWidth <= 0 && (e.minWidth = 100), e.maxWidth < e.minWidth && (e.maxWidth = 2e3), e.minHeight <= 0 && (e.minHeight = 100), e.maxHeight < e.minHeight && (e.maxHeight = 2e3)) : (e.minWidth = e.width, e.maxWidth = e.width, e.minHeight = e.height, e.maxHeight = e.height), e;\n      }\n    }]);\n\n    return x;\n  }();\n\n  !function (t, e) {\n    void 0 === e && (e = {});\n    var i = e.insertAt;\n\n    if (t && \"undefined\" != typeof document) {\n      var s = document.head || document.getElementsByTagName(\"head\")[0],\n          n = document.createElement(\"style\");\n      n.type = \"text/css\", \"top\" === i && s.firstChild ? s.insertBefore(n, s.firstChild) : s.appendChild(n), n.styleSheet ? n.styleSheet.cssText = t : n.appendChild(document.createTextNode(t));\n    }\n  }(\".stf__parent {\\n  position: relative;\\n  display: block;\\n  box-sizing: border-box;\\n  transform: translateZ(0);\\n\\n  -ms-touch-action: pan-y;\\n  touch-action: pan-y;\\n}\\n\\n.sft__wrapper {\\n  position: relative;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.stf__parent canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__block {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  perspective: 2000px;\\n}\\n\\n.stf__item {\\n  display: none;\\n  position: absolute;\\n  transform-style: preserve-3d;\\n}\\n\\n.stf__outerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__innerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardInnerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\");\n  t.PageFlip = /*#__PURE__*/function (_ref) {\n    _inherits(_class, _ref);\n\n    var _super9 = _createSuper(_class);\n\n    function _class(t, e) {\n      var _this13;\n\n      _classCallCheck(this, _class);\n\n      _this13 = _super9.call(this), _this13.isUserTouch = !1, _this13.isUserMove = !1, _this13.setting = null, _this13.pages = null, _this13.setting = new x().getSettings(e), _this13.block = t;\n      return _this13;\n    }\n\n    _createClass(_class, [{\n      key: \"destroy\",\n      value: function destroy() {\n        this.ui.destroy(), this.block.remove();\n      }\n    }, {\n      key: \"update\",\n      value: function update() {\n        this.render.update(), this.pages.show();\n      }\n    }, {\n      key: \"loadFromImages\",\n      value: function loadFromImages(t) {\n        var _this14 = this;\n\n        this.ui = new u(this.block, this, this.setting);\n        var e = this.ui.getCanvas();\n        this.render = new d(this, this.setting, e), this.flipController = new g(this.render, this), this.pages = new n(this, this.render, t), this.pages.load(), this.render.start(), this.pages.show(this.setting.startPage), setTimeout(function () {\n          _this14.ui.update(), _this14.trigger(\"init\", _this14, {\n            page: _this14.setting.startPage,\n            mode: _this14.render.getOrientation()\n          });\n        }, 1);\n      }\n    }, {\n      key: \"loadFromHTML\",\n      value: function loadFromHTML(t) {\n        var _this15 = this;\n\n        this.ui = new c(this.block, this, this.setting, t), this.render = new w(this, this.setting, this.ui.getDistElement()), this.flipController = new g(this.render, this), this.pages = new o(this, this.render, this.ui.getDistElement(), t), this.pages.load(), this.render.start(), this.pages.show(this.setting.startPage), setTimeout(function () {\n          _this15.ui.update(), _this15.trigger(\"init\", _this15, {\n            page: _this15.setting.startPage,\n            mode: _this15.render.getOrientation()\n          });\n        }, 1);\n      }\n    }, {\n      key: \"updateFromImages\",\n      value: function updateFromImages(t) {\n        var e = this.pages.getCurrentPageIndex();\n        this.pages.destroy(), this.pages = new n(this, this.render, t), this.pages.load(), this.pages.show(e), this.trigger(\"update\", this, {\n          page: e,\n          mode: this.render.getOrientation()\n        });\n      }\n    }, {\n      key: \"updateFromHtml\",\n      value: function updateFromHtml(t) {\n        var e = this.pages.getCurrentPageIndex();\n        this.pages.destroy(), this.pages = new o(this, this.render, this.ui.getDistElement(), t), this.pages.load(), this.ui.updateItems(t), this.render.reload(), this.pages.show(e), this.trigger(\"update\", this, {\n          page: e,\n          mode: this.render.getOrientation()\n        });\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        this.pages.destroy(), this.ui.clear();\n      }\n    }, {\n      key: \"turnToPrevPage\",\n      value: function turnToPrevPage() {\n        this.pages.showPrev();\n      }\n    }, {\n      key: \"turnToNextPage\",\n      value: function turnToNextPage() {\n        this.pages.showNext();\n      }\n    }, {\n      key: \"turnToPage\",\n      value: function turnToPage(t) {\n        this.pages.show(t);\n      }\n    }, {\n      key: \"flipNext\",\n      value: function flipNext() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"top\";\n        this.flipController.flipNext(t);\n      }\n    }, {\n      key: \"flipPrev\",\n      value: function flipPrev() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"top\";\n        this.flipController.flipPrev(t);\n      }\n    }, {\n      key: \"flip\",\n      value: function flip(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"top\";\n        this.flipController.flipToPage(t, e);\n      }\n    }, {\n      key: \"updateState\",\n      value: function updateState(t) {\n        this.trigger(\"changeState\", this, t);\n      }\n    }, {\n      key: \"updatePageIndex\",\n      value: function updatePageIndex(t) {\n        this.trigger(\"flip\", this, t);\n      }\n    }, {\n      key: \"updateOrientation\",\n      value: function updateOrientation(t) {\n        this.ui.setOrientationStyle(t), this.update(), this.trigger(\"changeOrientation\", this, t);\n      }\n    }, {\n      key: \"getPageCount\",\n      value: function getPageCount() {\n        return this.pages.getPageCount();\n      }\n    }, {\n      key: \"getCurrentPageIndex\",\n      value: function getCurrentPageIndex() {\n        return this.pages.getCurrentPageIndex();\n      }\n    }, {\n      key: \"getPage\",\n      value: function getPage(t) {\n        return this.pages.getPage(t);\n      }\n    }, {\n      key: \"getRender\",\n      value: function getRender() {\n        return this.render;\n      }\n    }, {\n      key: \"getFlipController\",\n      value: function getFlipController() {\n        return this.flipController;\n      }\n    }, {\n      key: \"getOrientation\",\n      value: function getOrientation() {\n        return this.render.getOrientation();\n      }\n    }, {\n      key: \"getBoundsRect\",\n      value: function getBoundsRect() {\n        return this.render.getRect();\n      }\n    }, {\n      key: \"getSettings\",\n      value: function getSettings() {\n        return this.setting;\n      }\n    }, {\n      key: \"getUI\",\n      value: function getUI() {\n        return this.ui;\n      }\n    }, {\n      key: \"getState\",\n      value: function getState() {\n        return this.flipController.getState();\n      }\n    }, {\n      key: \"getPageCollection\",\n      value: function getPageCollection() {\n        return this.pages;\n      }\n    }, {\n      key: \"startUserTouch\",\n      value: function startUserTouch(t) {\n        this.mousePosition = t, this.isUserTouch = !0, this.isUserMove = !1;\n      }\n    }, {\n      key: \"userMove\",\n      value: function userMove(t, e) {\n        this.isUserTouch || e || !this.setting.showPageCorners ? this.isUserTouch && h.GetDistanceBetweenTwoPoint(this.mousePosition, t) > 5 && (this.isUserMove = !0, this.flipController.fold(t)) : this.flipController.showCorner(t);\n      }\n    }, {\n      key: \"userStop\",\n      value: function userStop(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n        this.isUserTouch && (this.isUserTouch = !1, e || (this.isUserMove ? this.flipController.stopMove() : this.flipController.flip(t)));\n      }\n    }]);\n\n    return _class;\n  }( /*#__PURE__*/function () {\n    function _class2() {\n      _classCallCheck(this, _class2);\n\n      this.events = new Map();\n    }\n\n    _createClass(_class2, [{\n      key: \"on\",\n      value: function on(t, e) {\n        return this.events.has(t) ? this.events.get(t).push(e) : this.events.set(t, [e]), this;\n      }\n    }, {\n      key: \"off\",\n      value: function off(t) {\n        this.events.delete(t);\n      }\n    }, {\n      key: \"trigger\",\n      value: function trigger(t, e) {\n        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n        if (this.events.has(t)) {\n          var _iterator10 = _createForOfIteratorHelper(this.events.get(t)),\n              _step10;\n\n          try {\n            for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n              var _s5 = _step10.value;\n\n              _s5({\n                data: i,\n                object: e\n              });\n            }\n          } catch (err) {\n            _iterator10.e(err);\n          } finally {\n            _iterator10.f();\n          }\n        }\n      }\n    }]);\n\n    return _class2;\n  }()), Object.defineProperty(t, \"__esModule\", {\n    value: !0\n  });\n});","map":{"version":3,"names":["t","e","exports","module","define","amd","self","St","state","angle","area","position","x","y","hardAngle","hardDrawingAngle","createdDensity","nowDrawingDensity","render","orientation","i","image","isLoad","loadingAngle","Image","src","getContext","convertToGlobal","s","getRect","pageWidth","n","height","save","translate","beginPath","lineTo","rotate","clip","drawImage","drawLoader","restore","h","left","r","top","strokeStyle","fillStyle","lineWidth","rect","stroke","fill","arc","Math","PI","closePath","onload","pages","currentPageIndex","currentSpreadIndex","landscapeSpread","portraitSpread","app","isShowCover","getSettings","showCover","length","push","setDensity","getOrientation","getSpread","Error","indexOf","newTemporaryCopy","showSpread","getSpreadIndexByPage","setLeftPage","setRightPage","updatePageIndex","imagesHref","load","createSpread","sqrt","pow","GetDistanceBetweenTwoPoint","acos","width","cos","sin","o","a","g","PointInRect","GetIntersectBeetwenTwoLine","l","d","isFinite","abs","max","copiedElement","temporaryCopy","element","classList","add","cloneNode","parentElement","appendChild","getTemporaryCopy","remove","style","zIndex","drawHard","drawSoft","cssText","getDirection","GetRotatedPoint","slice","isSafari","startZIndex","pagesElement","dataset","density","direction","corner","topIntersectPoint","sideIntersectPoint","bottomIntersectPoint","parseInt","pageHeight","calcAngleAndPosition","calculateIntersectPoint","topLeft","bottomLeft","topRight","GetAngleBetweenTwoLine","getSegmentToShadowLine","updateAngleAndGeometry","checkPositionAtCenterLine","calculateAngle","getPageRect","getRectFromBasePoint","getRotatedPoint","bottomRight","GetIntersectBetweenTwoSegment","LimitPointToCircle","getShadowStartPoint","flippingPage","bottomPage","calc","setState","start","do","convertToPage","disableFlipByClick","isPointOnCorners","finishAnimation","getBoundsRect","getCorner","animateFlippingTo","reset","convertToBook","getDirectionByPoint","checkDirection","getPageCollection","getFlippingPage","getBottomPage","nextBy","getDensity","setDrawingDensity","prevBy","setDirection","toString","getFlippingProgress","setArea","getBottomClipArea","setPosition","getBottomPagePosition","setAngle","setHardAngle","getFlippingClipArea","getActiveCorner","getAngle","setPageRect","setBottomPage","setFlippingPage","setShadowData","getShadowAngle","getCurrentSpreadIndex","setCurrentSpreadIndex","flipNext","flipPrev","flip","getPosition","checkState","stopMove","GetCordsFromTwoPoint","getAnimationDuration","startAnimation","turnToPrevPage","turnToNextPage","clearShadow","updateState","flippingTime","getCurrentPageIndex","getPageCount","leftPage","rightPage","shadow","animation","pageRect","boundsRect","timer","safari","setting","RegExp","exec","window","navigator","userAgent","round","startedAt","durationFrame","frames","onAnimateEnd","drawFrame","update","requestAnimationFrame","duration","calculateBoundsRect","updateOrientation","getBlockWidth","getBlockHeight","size","minWidth","usePortrait","maxWidth","drawShadow","maxShadowOpacity","pos","opacity","progress","getUI","getDistElement","offsetWidth","offsetHeight","setOrientation","canvas","ctx","clear","simpleDraw","draw","drawBookShadow","drawOuterShadow","drawInnerShadow","createLinearGradient","addColorStop","fillRect","convertRectToGlobal","moveTo","p","touchPoint","swipeTimeout","onResize","onMouseDown","checkTarget","target","getMousePos","clientX","clientY","startUserTouch","preventDefault","onTouchStart","changedTouches","point","time","Date","now","setTimeout","mobileScrollSupport","onMouseUp","userStop","onMouseMove","userMove","onTouchMove","getState","cancelable","onTouchEnd","swipeDistance","getRender","insertAdjacentHTML","wrapper","querySelector","minHeight","autoSize","display","addEventListener","useMouseEvents","removeHandlers","distElement","paddingBottom","removeEventListener","passive","getBoundingClientRect","clickEventForward","includes","tagName","toLowerCase","c","items","setHandlers","innerHTML","u","querySelectorAll","resizeCanvas","getComputedStyle","getPropertyValue","w","outerShadow","innerShadow","hardShadow","hardInnerShadow","createShadows","getDrawingDensity","getElement","setHardDrawingAngle","getHardAngle","drawLeftPage","drawRightPage","drawBottomPage","drawHardOuterShadow","drawHardInnerShadow","getPages","hideTemporaryCopy","_default","startPage","maxHeight","showPageCorners","Object","assign","insertAt","document","head","getElementsByTagName","createElement","type","firstChild","insertBefore","styleSheet","createTextNode","PageFlip","isUserTouch","isUserMove","block","ui","destroy","show","getCanvas","flipController","trigger","page","mode","updateItems","reload","showPrev","showNext","flipToPage","setOrientationStyle","getPage","mousePosition","fold","showCorner","events","Map","has","get","set","delete","data","object","defineProperty","value"],"sources":["/Users/coderschool/dev/Zion/newrepo/gat-dev/node_modules/page-flip/dist/js/page-flip.browser.js"],"sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e((t=t||self).St={})}(this,(function(t){\"use strict\";class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends e{constructor(t,e,i){super(t,i),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){const e=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;e.save(),e.translate(i.x,i.y),e.beginPath();for(let t of this.state.area)null!==t&&(t=this.render.convertToGlobal(t),e.lineTo(t.x-i.x,t.y-i.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,s,n):this.drawLoader(e,{x:0,y:0},s,n),e.restore()}simpleDraw(t){const e=this.render.getRect(),i=this.render.getContext(),s=e.pageWidth,n=e.height,h=1===t?e.left+e.pageWidth:e.left,r=e.top;this.isLoad?i.drawImage(this.image,h,r,s,n):this.drawLoader(i,{x:h,y:r},s,n)}drawLoader(t,e,i,s){t.beginPath(),t.strokeStyle=\"rgb(200, 200, 200)\",t.fillStyle=\"rgb(255, 255, 255)\",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,s-1),t.stroke(),t.fill();const n={x:e.x+i/2,y:e.y+s/2};t.beginPath(),t.lineWidth=10,t.arc(n.x,n.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let t=0;this.isShowCover&&(this.pages[0].setDensity(\"hard\"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity(\"hard\"))}getSpread(){return\"landscape\"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){const e=this.getSpread();for(let i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error(\"Invalid page number\")}nextBy(t){const e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){const e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}}getBottomPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;const e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error(\"Invalid page\");this.currentSpreadIndex=t}showSpread(){const t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):\"landscape\"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class n extends s{constructor(t,e,i){super(t,e),this.imagesHref=i}load(){for(const t of this.imagesHref){const e=new i(this.render,t,\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class h{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return h.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x;return Math.acos((i*s+n*h)/(Math.sqrt(i*i+n*n)*Math.sqrt(s*s+h*h)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}static LimitPointToCircle(t,e,i){if(h.GetDistanceBetweenTwoPoint(t,i)<=e)return i;const s=t.x,n=t.y,r=i.x,o=i.y;let a=Math.sqrt(Math.pow(e,2)*Math.pow(s-r,2)/(Math.pow(s-r,2)+Math.pow(n-o,2)))+s;i.x<0&&(a*=-1);let g=(a-s)*(n-o)/(s-r)+n;return s-r+n===0&&(g=e),{x:a,y:g}}static GetIntersectBetweenTwoSegment(t,e,i){return h.PointInRect(t,h.GetIntersectBeetwenTwoLine(e,i))}static GetIntersectBeetwenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x,r=t[0].x*t[1].y-t[1].x*t[0].y,o=e[0].x*e[1].y-e[1].x*e[0].y,a=i*o-s*r,g=n*o-h*r,l=-(r*h-o*n)/(i*h-s*n),d=-(i*o-s*r)/(i*h-s*n);if(isFinite(l)&&isFinite(d))return{x:l,y:d};if(Math.abs(a-g)<.1)throw new Error(\"Segment included\");return null}static GetCordsFromTwoPoint(t,e){const i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),n=Math.max(i,s),h=[t];function r(t,e,i,s,n){return e>t?t+n*(i/s):e<t?t-n*(i/s):t}for(let o=1;o<=n;o+=1)h.push({x:r(t.x,e.x,i,n,o),y:r(t.y,e.y,s,n,o)});return h}}class r extends e{constructor(t,e,i){super(t,i),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add(\"stf__item\"),this.element.classList.add(\"--\"+i)}newTemporaryCopy(){return\"hard\"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new r(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){const e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;this.element.classList.remove(\"--simple\");const h=`\\n            display: block;\\n            z-index: ${this.element.style.zIndex};\\n            left: 0;\\n            top: 0;\\n            width: ${s}px;\\n            height: ${n}px;\\n        `;\"hard\"===e?this.drawHard(h):this.drawSoft(i,h)}drawHard(t=\"\"){const e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,s=t+\"\\n                backface-visibility: hidden;\\n                -webkit-backface-visibility: hidden;\\n                clip-path: none;\\n                -webkit-clip-path: none;\\n            \"+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; \\n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);`:`transform-origin: 0 0; \\n                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);this.element.style.cssText=s}drawSoft(t,e=\"\"){let i=\"polygon( \";for(const t of this.state.area)if(null!==t){let e=1===this.render.getDirection()?{x:-t.x+this.state.position.x,y:t.y-this.state.position.y}:{x:t.x-this.state.position.x,y:t.y-this.state.position.y};e=h.GetRotatedPoint(e,{x:0,y:0},this.state.angle),i+=e.x+\"px \"+e.y+\"px, \"}i=i.slice(0,-2),i+=\")\";const s=e+`transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=s}simpleDraw(t){const e=this.render.getRect(),i=e.pageWidth,s=e.height,n=1===t?e.left+e.pageWidth:e.left,h=e.top;this.element.classList.add(\"--simple\"),this.element.style.cssText=`\\n            position: absolute; \\n            display: block; \\n            height: ${s}px; \\n            left: ${n}px; \\n            top: ${h}px; \\n            width: ${i}px; \\n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove(\"--left\",\"--right\"),this.element.classList.add(1===t?\"--right\":\"--left\")}setDrawingDensity(t){this.element.classList.remove(\"--soft\",\"--hard\"),this.element.classList.add(\"--\"+t),super.setDrawingDensity(t)}}class o extends s{constructor(t,e,i,s){super(t,e),this.element=i,this.pagesElement=s}load(){for(const t of this.pagesElement){const e=new r(this.render,t,\"hard\"===t.dataset.density?\"hard\":\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class a{constructor(t,e,i,s){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(i,10),this.pageHeight=parseInt(s,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(t){return!1}}getFlippingClipArea(){const t=[];let e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||\"bottom\"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){const t=[];return t.push(this.topIntersectPoint),\"top\"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?h.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):\"top\"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return\"top\"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const t=h.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),e=\"top\"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error(\"Point is too small\");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){const e=this.pageWidth-t.x+1,i=\"bottom\"===this.corner?this.pageHeight-t.y:t.y;let s=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(s=-s);const n=Math.PI-s;if(!isFinite(s)||n>=0&&n<.003)throw new Error(\"The G point is too small\");return\"bottom\"===this.corner&&(s=-s),s}getPageRect(t){return\"top\"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){const e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};\"top\"===this.corner?(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(t,e,i){let s=t;const n=h.LimitPointToCircle(e,this.pageWidth,s);s!==n&&(s=n,this.updateAngleAndGeometry(s));const r=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let o=this.rect.bottomRight,a=this.rect.topLeft;if(\"bottom\"===this.corner&&(o=this.rect.topRight,a=this.rect.bottomLeft),o.x<=0){const t=h.LimitPointToCircle(i,r,a);t!==s&&(s=t,this.updateAngleAndGeometry(s))}return s}getSegmentToShadowLine(){const t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state=\"read\",this.render=t,this.app=e}fold(t){this.setState(\"user_fold\"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(t))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(t))return;const e=this.getBoundsRect();this.setState(\"flipping\");const i=e.height/10,s=\"bottom\"===this.calc.getCorner()?e.height-i:i,n=\"bottom\"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:s}),this.animateFlippingTo({x:e.pageWidth-i,y:s},{x:-e.pageWidth,y:n},!0)}start(t){this.reset();const e=this.render.convertToBook(t),i=this.getBoundsRect(),s=this.getDirectionByPoint(e),n=e.y>=i.height/2?\"bottom\":\"top\";if(!this.checkDirection(s))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(s),this.bottomPage=this.app.getPageCollection().getBottomPage(s),\"landscape\"===this.render.getOrientation())if(1===s){const t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}else{const t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}return this.render.setDirection(s),this.calc=new a(s,n,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(t){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){const i=this.app.getPageCollection().getCurrentSpreadIndex(),s=this.app.getPageCollection().getSpreadIndexByPage(t);try{s>i&&(this.app.getPageCollection().setCurrentSpreadIndex(s-1),this.flipNext(e)),s<i&&(this.app.getPageCollection().setCurrentSpreadIndex(s+1),this.flipPrev(e))}catch(t){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:\"top\"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:\"top\"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const t=this.calc.getPosition(),e=this.getBoundsRect(),i=\"bottom\"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}showCorner(t){if(!this.checkState(\"read\",\"fold_corner\"))return;const e=this.getBoundsRect(),i=e.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState(\"fold_corner\"),this.calc.calc({x:i-1,y:1});const s=50,n=\"bottom\"===this.calc.getCorner()?e.height-1:1,h=\"bottom\"===this.calc.getCorner()?e.height-s:s;this.animateFlippingTo({x:i-1,y:n},{x:i-s,y:h},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState(\"read\"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,i,s=!0){const n=h.GetCordsFromTwoPoint(t,e),r=[];for(const t of n)r.push(()=>this.do(t));const o=this.getAnimationDuration(n.length);this.render.startAnimation(r,o,()=>{this.calc&&(i&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),s&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState(\"read\"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){const e=this.getBoundsRect();if(\"portrait\"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){const e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(t){const e=this.getBoundsRect(),i=e.pageWidth,s=Math.sqrt(Math.pow(i,2)+Math.pow(e.height,2))/5,n=this.render.convertToBook(t);return n.x>0&&n.y>0&&n.x<e.width&&n.y<e.height&&(n.x<s||n.x>e.width-s)&&(n.y<s||n.y>e.height-s)}}class l{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;const i=new RegExp(\"Version\\\\/[\\\\d\\\\.]+.*Safari/\");this.safari=null!==i.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){const e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();const t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t=\"landscape\";const e=this.getBlockWidth(),i=e/2,s=this.getBlockHeight()/2,n=this.setting.width/this.setting.height;let h=this.setting.width,r=this.setting.height,o=i-h;return\"stretch\"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t=\"portrait\"),h=\"portrait\"===t?this.getBlockWidth():this.getBlockWidth()/2,h>this.setting.maxWidth&&(h=this.setting.maxWidth),r=h/n,r>this.getBlockHeight()&&(r=this.getBlockHeight(),h=r*n),o=\"portrait\"===t?i-h/2-h:i-h):e<2*h&&this.app.getSettings().usePortrait&&(t=\"portrait\",o=i-h/2-h),this.boundsRect={left:o,top:s-r/2,width:2*h,height:r,pageWidth:h},t}setShadowData(t,e,i,s){if(!this.app.getSettings().drawShadow)return;const n=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*n/100/100,direction:s,progress:2*i}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&\"portrait\"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){const e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);const i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;const i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class d extends l{constructor(t,e,i){super(t,e),this.canvas=i,this.ctx=i.getContext(\"2d\")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),\"portrait\"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const t=this.getRect();\"portrait\"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);const i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);const s=this.ctx.createLinearGradient(0,0,e,0);s.addColorStop(0,\"rgba(0, 0, 0, 0)\"),s.addColorStop(.4,\"rgba(0, 0, 0, 0.2)\"),s.addColorStop(.49,\"rgba(0, 0, 0, 0.1)\"),s.addColorStop(.5,\"rgba(0, 0, 0, 0.5)\"),s.addColorStop(.51,\"rgba(0, 0, 0, 0.4)\"),s.addColorStop(1,\"rgba(0, 0, 0, 0)\"),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),i.addColorStop(1,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,\"rgba(0, 0, 0, 0)\"),i.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const s=3*this.shadow.width/4,n=this.ctx.createLinearGradient(0,0,s,0);0===this.shadow.direction?(this.ctx.translate(-s,-100),n.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.9,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.7,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(0,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(0,-100),n.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.1,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.3,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(1,\"rgba(0, 0, 0, 0)\")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,s,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle=\"white\",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class p{constructor(t,e,i){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){const e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:i,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(i)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-i.x)>10||\"read\"!==this.app.getState())&&t.cancelable&&this.app.userMove(i,!0),\"read\"!==this.app.getState()&&t.preventDefault()):this.app.userMove(i,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);let s=!1;if(null!==this.touchPoint){const t=i.x-this.touchPoint.point.x,e=Math.abs(i.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"),s=!0),this.touchPoint=null}this.app.userStop(i,s)}},this.parentElement=t,t.classList.add(\"stf__parent\"),t.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__wrapper\"></div>'),this.wrapper=t.querySelector(\".stf__wrapper\"),this.app=e;const s=this.app.getSettings().usePortrait?1:2;t.style.minWidth=i.minWidth*s+\"px\",t.style.minHeight=i.minHeight+\"px\",\"fixed\"===i.size&&(t.style.minWidth=i.width*s+\"px\",t.style.minHeight=i.height+\"px\"),i.autoSize&&(t.style.width=\"100%\",t.style.maxWidth=2*i.maxWidth+\"px\"),t.style.display=\"block\",window.addEventListener(\"resize\",this.onResize,!1),this.swipeDistance=i.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove(\"--portrait\",\"--landscape\"),\"portrait\"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+\"%\"),this.wrapper.classList.add(\"--portrait\")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+\"%\"),this.wrapper.classList.add(\"--landscape\")),this.update()}removeHandlers(){window.removeEventListener(\"resize\",this.onResize),this.distElement.removeEventListener(\"mousedown\",this.onMouseDown),this.distElement.removeEventListener(\"touchstart\",this.onTouchStart),window.removeEventListener(\"mousemove\",this.onMouseMove),window.removeEventListener(\"touchmove\",this.onTouchMove),window.removeEventListener(\"mouseup\",this.onMouseUp),window.removeEventListener(\"touchend\",this.onTouchEnd)}setHandlers(){window.addEventListener(\"resize\",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener(\"mousedown\",this.onMouseDown),this.distElement.addEventListener(\"touchstart\",this.onTouchStart),window.addEventListener(\"mousemove\",this.onMouseMove),window.addEventListener(\"touchmove\",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener(\"mouseup\",this.onMouseUp),window.addEventListener(\"touchend\",this.onTouchEnd))}getMousePos(t,e){const i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||![\"a\",\"button\"].includes(t.tagName.toLowerCase())}}class c extends p{constructor(t,e,i,s){super(t,e,i),this.wrapper.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__block\"></div>'),this.distElement=t.querySelector(\".stf__block\"),this.items=s;for(const t of s)this.distElement.appendChild(t);this.setHandlers()}clear(){for(const t of this.items)this.parentElement.appendChild(t)}updateItems(t){this.removeHandlers(),this.distElement.innerHTML=\"\";for(const e of t)this.distElement.appendChild(e);this.items=t,this.setHandlers()}update(){this.app.getRender().update()}}class u extends p{constructor(t,e,i){super(t,e,i),this.wrapper.innerHTML='<canvas class=\"stf__canvas\"></canvas>',this.canvas=t.querySelectorAll(\"canvas\")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue(\"width\"),10),i=parseInt(t.getPropertyValue(\"height\"),10);this.canvas.width=e,this.canvas.height=i}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class w extends l{constructor(t,e,i){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=i,this.createShadows()}createShadows(){this.element.insertAdjacentHTML(\"beforeend\",'<div class=\"stf__outerShadow\"></div>\\n             <div class=\"stf__innerShadow\"></div>\\n             <div class=\"stf__hardShadow\"></div>\\n             <div class=\"stf__hardInnerShadow\"></div>'),this.outerShadow=this.element.querySelector(\".stf__outerShadow\"),this.innerShadow=this.element.querySelector(\".stf__innerShadow\"),this.hardShadow=this.element.querySelector(\".stf__hardShadow\"),this.hardInnerShadow=this.element.querySelector(\".stf__hardInnerShadow\")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText=\"display: none\",this.innerShadow.style.cssText=\"display: none\",this.hardShadow.style.cssText=\"display: none\",this.hardInnerShadow.style.cssText=\"display: none\"}reload(){this.element.querySelector(\".stf__outerShadow\")||this.createShadows()}drawHardInnerShadow(){const t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let i=(100-e)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);let s=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\\n            width: ${i}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to right,\\n                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,\\n                rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;s+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0);\":\"transform: translate3d(0, 0, 0) rotateY(180deg);\",this.hardInnerShadow.style.cssText=s}drawHardOuterShadow(){const t=this.getRect();let e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let i=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\\n            width: ${e}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0) rotateY(180deg);\":\"transform: translate3d(0, 0, 0);\",this.hardShadow.style.cssText=i}drawInnerShadow(){const t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,s=0===this.getDirection()?\"to left\":\"to right\",n=this.convertToGlobal(this.shadow.pos),r=this.shadow.angle+3*Math.PI/2,o=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let a=\"polygon( \";for(const t of o){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:i,y:100},r),a+=e.x+\"px \"+e.y+\"px, \"}a=a.slice(0,-2),a+=\")\";const g=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${e}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${s},\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\\n                rgba(0, 0, 0, 0.05) 15%,\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\\n                rgba(0, 0, 0, 0) 100%);\\n            transform-origin: ${i}px 100px;\\n            transform: translate3d(${n.x-i}px, ${n.y-100}px, 0) rotate(${r}rad);\\n            clip-path: ${a};\\n            -webkit-clip-path: ${a};\\n        `;this.innerShadow.style.cssText=g}drawOuterShadow(){const t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,s=1===this.getDirection()?this.shadow.width:0,n=0===this.getDirection()?\"to right\":\"to left\",r=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];let o=\"polygon( \";for(const t of r)if(null!==t){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:s,y:100},i),o+=e.x+\"px \"+e.y+\"px, \"}o=o.slice(0,-2),o+=\")\";const a=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${this.shadow.width}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\\n            transform-origin: ${s}px 100px;\\n            transform: translate3d(${e.x-s}px, ${e.y-100}px, 0) rotate(${i}rad);\\n            clip-path: ${o};\\n            -webkit-clip-path: ${o};\\n        `;this.outerShadow.style.cssText=a}drawLeftPage(){\"portrait\"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;\"portrait\"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&(\"soft\"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText=\"display: none\"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class x{constructor(){this._default={startPage:0,size:\"fixed\",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(t){const e=this._default;if(Object.assign(e,t),\"stretch\"!==e.size&&\"fixed\"!==e.size)throw new Error('Invalid size type. Available only \"fixed\" and \"stretch\" value');if(e.width<=0||e.height<=0)throw new Error(\"Invalid width or height\");if(e.flippingTime<=0)throw new Error(\"Invalid flipping time\");return\"stretch\"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&\"undefined\"!=typeof document){var s=document.head||document.getElementsByTagName(\"head\")[0],n=document.createElement(\"style\");n.type=\"text/css\",\"top\"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}(\".stf__parent {\\n  position: relative;\\n  display: block;\\n  box-sizing: border-box;\\n  transform: translateZ(0);\\n\\n  -ms-touch-action: pan-y;\\n  touch-action: pan-y;\\n}\\n\\n.sft__wrapper {\\n  position: relative;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.stf__parent canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__block {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  perspective: 2000px;\\n}\\n\\n.stf__item {\\n  display: none;\\n  position: absolute;\\n  transform-style: preserve-3d;\\n}\\n\\n.stf__outerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__innerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardInnerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\");t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,i=null){if(this.events.has(t))for(const s of this.events.get(t))s({data:i,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new x).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new u(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new d(this,this.setting,e),this.flipController=new g(this.render,this),this.pages=new n(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(t){this.ui=new c(this.block,this,this.setting,t),this.render=new w(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new n(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t=\"top\"){this.flipController.flipNext(t)}flipPrev(t=\"top\"){this.flipController.flipPrev(t)}flip(t,e=\"top\"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger(\"changeState\",this,t)}updatePageIndex(t){this.trigger(\"flip\",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger(\"changeOrientation\",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&h.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,\"__esModule\",{value:!0})}));\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}